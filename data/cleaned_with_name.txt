<start> Ester: PA2! <end> <start> Winfrey: Thanks Ester! <end> <start> Ester: You named the group CSE 151B PA2. <end> <start> Winfrey: What should our group name be üòé Ester and I used transformers for PA1 <end> <start> Jeremy: lol anything works <end> <start> Jeremy: we could be incredibly original and use our names <end> <start> Ester: Or name it according to the PA content? Like Convolution? ü´† <end> <start> Winfrey: Okie dokie <end> <start> Winfrey: I‚Äôll make one convolution <end> <start> Winfrey: Created, go join ‚Äúconvolution‚Äù <end> <start> Winfrey: Also could you send me your email so I could add y‚Äôall as collaborator? <end> <start> Ester: Thank you for creating! <end> <start> Winfrey: Added! <end> <start> Ester: I created my own branch in our repo https://github.com/cse151bwi24/cse151b251b-wi24-pa2-convolution/tree/master <end> <start> Ester: I pushed the updated util.py to master, but I need a minor fix after asking a question on piazza <end> <start> Ester: Are you guys able to access a GPU of any sort? Datahub is still down and I can't get Google Colab to work either <end> <start> Winfrey: Thinking if we can use our data science capstone‚Äôs ü§î <end> <start> Ester: I guess so! <end> <start> Winfrey: Yeahh <end> <start> Ester: Actually it seems like the issue happened because I‚Äôm still occupying a GPU for capstone <end> <start> Ester: So I can only work on one project at a time <end> <start> Winfrey: OHH I see I seeeee <end> <start> Winfrey: Does it say something like CUDA blah blah exceeded or killed when u run two? <end> <start> Ester: It says "Request exceeds limit of 1 GPUs" hahaa <end> <start> Winfrey: OHHH okay I was wondering if u run it on the same session <end> <start> Winfrey: But better not risk terminating the project you are running at the moment <end> <start> Winfrey: In case it gets killed and u gotta restart the kernel üòÖ <end> <start> Ester: I can just clear some space in my private folder and git clone the project there <end> <start> Winfrey: Yeah sure that‚Äôs what I did <end> <start> Winfrey: But yeah I ran into once when I was running two projects (ie notebooks) and it got too much to handle, and both just terminated - painful!! ü•≤ <end> <start> Winfrey: @Ester Tsai are you at part 2 for the programming part? The data loading section <end> <start> Ester: Yes, I have the code for the baseline model but I‚Äôll test it when I finish running something for capstone <end> <start> Ester: (I don‚Äôt know if my baseline model works, will likely need to debug! <end> <start> Winfrey: Okkk! Sounds good, so have u implemented the test and val data in voc.py? <end> <start> Ester: Feel free to test it by cloning my branch tho! <end> <start> Ester: Yes <end> <start> Winfrey: Ok could you push it to your branch? I don‚Äôt think I see it there just now <end> <start> Ester: Also the first half of visualize.option <end> <start> Ester: Visualize.ipynb * <end> <start> Ester: https://github.com/cse151bwi24/cse151b251b-wi24-pa2-convolution/tree/ester <end> <start> Winfrey: Yeah! wanna focus on the models so we don‚Äôt duplicate efforts on writing basic utils - which will be largely the same anyway <end> <start> Winfrey: Yup thanks! <end> <start> Ester: Almost done with the baseline model! Gonna keep testing it until test IoU is consistently around 0.05 <end> <start> Winfrey: Okie!! Thanks! <end> <start> Winfrey: I got started with building UNet (5c)  ^just a relatively independent task to work on in the mean time. But I‚Äôll build off what you have Ester, when the baseline is ready! Thank you Ester!! <end> <start> Winfrey: Hmm not sure if this will make a difference and/or you are probably doing it already, might want to try using AdamW optimizer in train.py <end> <start> Winfrey: I see we are using SGD optimizer currently <end> <start> Ester: ok I can try! <end> <start> Ester: Coding is done up to part 3, so feel free to make a branch of the current master branch and start working on part 4 <end> <start> Ester: You can test the model by running "python train.py" in the terminal <end> <start> Winfrey: Yayyy thank you thank youuu!! <end> <start> Ester: voc.py is where we should implement data augmentation (part 4b), after defining the augmentation <end> <start> Ester: (this is not pushed to the master branch since I'll just experiment on my own branch first! <end> <start> Winfrey: Yup yupp! <end> <start> Winfrey: I‚Äôm also looking at augmentation options in torchvision (part of UNet requires this) <end> <start> Winfrey: Are you also looking at torchvision? <end> <start> Winfrey: Just curious if there‚Äôs other places that offer image augmentation methods <end> <start> Ester: TA gave this link as an example: https://pytorch.org/vision/main/generated/torchvision.transforms.RandomRotation.html <end> <start> Winfrey: I see I see! Okk looks like it‚Äôs the same root library! Thanks for confirming haha <end> <start> Jonathan: Idk if u guys r getting the same error but I can update my branch from the master I get an error <end> <start> Jonathan: Cant* <end> <start> Jonathan: So I just downloaded the zip file LOL <end> <start> Ester: Maybe make a new branch haha <end> <start> Ester: GitHub high key confusing sometimes <end> <start> Winfrey: AGREE <end> <start> Winfrey: What error are you getting tho? <end> <start> Winfrey: Is it related to authentication? <end> <start> Jonathan: I‚Äôm guessing it‚Äôs bc the pth model file is large and bc there‚Äôs some byte error <end> <start> Winfrey: Interesting.. so u get an error when running the model? <end> <start> Winfrey: I haven‚Äôt tried running the model yet so <end> <start> Ester: It shouldn‚Äôt be large tho <end> <start> Jonathan: ok its fixed <end> <start> Jonathan: its because my wifi sucks <end> <start> Winfrey: Wow good to know that wifi actually matters üòÖ <end> <start> Winfrey: UNet is done, and together with a train_unet.py for that  train_unet is just a duplicate of train.py with minimal changes - if anyone would like to, feel free to combine the two, probably will have to create a TrainLoop object and initialize models given model name == FCN or UNet or more that we will explore. For now, the easiest is to have different train files for each model, which I believe is fine from the description of Part 5 in the assignment pdf  If everyone is okay, I can push to master before noon. Also, it‚Äôd be good to have a few more pairs of eyes to check the architecture <end> <start> Winfrey: Yoo before the weekend comes, I am thinking if we want to sync a little on what we are currently doing and/or interested in doing? For the programming part, I believe part 4 and 5 <end> <start> Winfrey: I haven‚Äôt started anything after UNet. But I‚Äôm open to working on 5b / part 4b image augmentations / part 4c imbalanced class <end> <start> Jonathan: I‚Äôm down to work on those parts too, but I‚Äôm not available the rest of today and am currently trying to implement the other code myself to make sure I‚Äôm understanding it <end> <start> Winfrey: Okkk let‚Äôs wait and see what Ester and Jeremy are working on/ plan to work on/ have a preference for <end> <start> Winfrey: Also, no pressure, just wanna make sure we don‚Äôt end up working on the exact same thing üòÇ <end> <start> Winfrey: Oh yeah did prof say anything about moving the MT date? Since it‚Äôs going to be on lunar new year <end> <start> Ester: I can start working on pa2 again on Monday! And then work on the report Tues and Wednesday. Down to work on both Q4 and 5 if time permits, but if time is tight, I‚Äôll piggy back off of existing Q4 and just work on Q5! <end> <start> Ester: There was a piazza post that said we‚Äôre not moving the midterm I think <end> <start> Winfrey: Yupp ok sounds good!! U did parts 1-3 this week and I‚Äôm very thankful for that!! <end> <start> Winfrey: OOOH I seee <end> <start> Jeremy: about the same for me i‚Äôm also open to working on any of it <end> <start> Winfrey: Ok! I‚Äôll get started on part 4a later, I‚Äôll keep y‚Äôall updated on my progress over the weekend <end> <start> Winfrey: doc for sharing results  https://docs.google.com/document/d/1tPFP9Rze0i04IthIebiXCBRidNryW-q2Eq9NENvjZF8/edit?usp=sharing <end> <start> Winfrey: @Ester Tsai quick question, for the optimizer, did you choose learning rate to be 0.001 or was it given? <end> <start> Ester: I chose it <end> <start> Winfrey: i see.. okay! with learning rate 0.1, the accuracy actually went up to 75% (but the assignment pdf said expected ~65%)  IoU is fine, ~0.05 <end> <start> Winfrey: I can make a post on piazza <end> <start> Winfrey: just came across this section in the visualize notebook  I will have to take back my words earlier on combining the train files, it looks like it is recommended to have different train files for all subparts in part 4 & 5 <end> <start> Winfrey: I am pretty much done with 4a, just re-running them to check the numbers <end> <start> Ester: Make sense! <end> <start> Winfrey: 4b is done! If everyone is okay, I can push to master <end> <start> Ester: Thanks!! <end> <start> Winfrey: Kong pinned a message. <end> <start> Winfrey: I will get back on pa2 tomorrow, is there anything that I can work on? <end> <start> Ester: I can get on that too after capstone tomorrow! What is left that we need to work on? <end> <start> Winfrey: From yesterday, I know we have 4c, 5a and 5b left <end> <start> Winfrey: I‚Äôll get started on 4c today <end> <start> Winfrey: Just did some research for 4c, I should be able to get 4c done today, will keep y‚Äôall posted on my progress <end> <start> Jonathan: Attempting 5a - will update on how that goes lol <end> <start> Winfrey: Thanks! <end> <start> Jeremy: i‚Äôll take a look at 5b later tonight <end> <start> Winfrey: Thank you! <end> <start> Winfrey: Pretty much done with 4c, just running a bunch of experiments, will let y‚Äôall know before I push <end> <start> Ester: I'll start on the report <end> <start> Winfrey: Great! I‚Äôll join u on the report tomorrow! <end> <start> Ester: Here is the link to the report: https://www.overleaf.com/5635268337spfdxsqxhznt#1b7f16 <end> <start> Ester: And the checklist of requriements: https://docs.google.com/document/d/1nJQMPYDRe2u6rF9DQKSnqh1L9nu2qlguvrrr8XS9Ofc/edit <end> <start> Ester: There are a lot to write, so I'll make a poll for how to divide the work if you guys are ok with that! <end> <start> Ester: You created a poll: PA2 Report Responsibility (par... <end> <start> Ester: You created a poll: PA2 Report (part 2). <end> <start> Ester: You voted for "Methods - Baseline" and 1 other option in the poll. <end> <start> Ester: You voted for "Discussion - Baseline" and 1 other option in the poll. <end> <start> Winfrey: Kong voted for "Discussion - Improving on basline" and 1 other option in the poll. <end> <start> Winfrey: Kong voted for "Methods - Improving on baseline" and 2 other options in the poll. <end> <start> Jonathan: Jonathan voted for "Double Check everything before..." in the poll. <end> <start> Jonathan: I can also do experimentation bc I‚Äôm doing 5a <end> <start> Winfrey: Experimentation (report) I‚Äôll do 5c UNet <end> <start> Ester: oo true it would be good to specify the 3 sections in Methods Experimentation and Discussion Experimentation <end> <start> Ester: Has anyone done 5b yet? If not, I can look into it <end> <start> Jeremy: i‚Äôm going to look into 5b in a bit <end> <start> Ester: You voted for "Abstract" in the poll. <end> <start> Winfrey: I will push 4c before 12am! Have been fine tuning the hyper parameters, finally got a satisfactory result üòÆ‚Äçüí®üò¥ <end> <start> Ester: Yay! <end> <start> Ester: You voted for "Methods - Improving on baseline" in the poll. <end> <start> Ester: You voted for "Discussion - Improving on basline" in the poll. <end> <start> Ester: I filled in the part for Cosine Annealing for both methods and discussion <end> <start> Winfrey: Yayyyy! Thanks! <end> <start> Jonathan: anyone getting an error like "RuntimeError: input and target batch or spatial sizes don't match: target [16, 224, 224], input [16, 21, 256, 256]" when messing with kernel size? <end> <start> Jonathan: how do i adjust the fix it? <end> <start> Jonathan: something wrong with the cirterion function <end> <start> Ester: Are you using your own code or Winfrey‚Äôs base code? <end> <start> Winfrey: Did you get this from the line   Loss = criterion(outputs, labels) ? <end> <start> Jonathan: i used my own code though it has similar sctructure to the 4 questions <end> <start> Winfrey: I think it‚Äôs the <end> <start> Winfrey: 256 not matching 224 <end> <start> Winfrey: Your output H and W should be 224 <end> <start> Winfrey: Try changing padding <end> <start> Ester: @Winfrey Kong @Jeremy Tow @Jonathan Cheung Are you all free to call tomorrow at 9am to check in for PA2? <end> <start> Winfrey: Yes! <end> <start> Jonathan: Yeah <end> <start> Jeremy: ye i shuld be free <end> <start> Ester: I‚Äôll implement the training and validation plot for report Results section <end> <start> Winfrey: Ok sure, thanks! <end> <start> Winfrey: Working on the rest of ‚Äúimproving the baseline‚Äù now <end> <start> Winfrey: Could someone confirm that the number of the original training data is 209? <end> <start> Winfrey: Oh yeah @Jeremy Tow @Jonathan Cheung when training the models for part 5, id recommend using the current train code implemented up till 4c to check if both IoU and accuracy increase.  Baseline + enhancements up till 4c gives IoU around 0.065 to 0.067 and accuracy 0.72 to 0.74  I saw a piazza post that they expect our models in part 5 to give better iou and accuracy <end> <start> Jeremy: okok <end> <start> Jeremy: will do <end> <start> Jeremy: rn transfer learning with 5b is giving iou 0.071 and pixel acc 0.737 with the old train code <end> <start> Jeremy: im going to test with the new train code rn <end> <start> Jeremy: just tried 5b with @Winfrey Kong's train_4_c, it took 15 minutes to run and the pixel acc was 0.79 with an iou of 0.2 <end> <start> Jeremy: rly good numbers <end> <start> Jeremy: oh btw where / how are we meeting tmr <end> <start> Jeremy: or ig today <end> <start> Winfrey: I think remotely! <end> <start> Winfrey: This is great!!! <end> <start> Ester: DANG Winfrey you got up at 5am ü•µ <end> <start> Ester: I'll create a Zoom link <end> <start> Winfrey: I normally take a VERY LONG TIME for breakfast üòÇüòÇüòÇ <end> <start> Ester: https://ucsd.zoom.us/j/94091921602 <end> <start> Ester: @Jonathan Cheung @Jeremy Tow Zoom? <end> <start> Ester: def set_seed(seed: int = 42) -> None:     np.random.seed(seed)     random.seed(seed)     torch.manual_seed(seed)     torch.cuda.manual_seed(seed)     # When running on the CuDNN backend, two further options must be set     torch.backends.cudnn.deterministic = True     torch.backends.cudnn.benchmark = False     # Set a fixed value for the hash seed     os.environ["PYTHONHASHSEED"] = str(seed) <end> <start> Ester: You voted for "Results (filling in the numbers)" in the poll. <end> <start> Ester: You voted for "Discussion - Experimentation" in the poll. <end> <start> Winfrey: Kong voted for "Related Work (at least 2 people)" in the poll. <end> <start> Winfrey: I‚Äôll add UNet as one of the related works <end> <start> Ester: https://www.overleaf.com/5635268337spfdxsqxhznt#1b7f16 <end> <start> Winfrey: Kong voted for "References" in the poll. <end> <start> Ester: https://docs.google.com/document/d/1nJQMPYDRe2u6rF9DQKSnqh1L9nu2qlguvrrr8XS9Ofc/edit <end> <start> Ester: We'll aim to get the report draft done by tonight! <end> <start> Winfrey: Yesss agreed! <end> <start> Ester: @Jeremy Tow could you push your train_5_b code sometime today when you're done? <end> <start> Jeremy: yep sounds good <end> <start> Jeremy: its literally just winfrey's train_4_c code lol <end> <start> Jeremy: i only modified the basic_fcn file <end> <start> Ester: okok could I have your modified basic_fcn file haha <end> <start> Winfrey: Ester do u plan to push ur code to master? The seed and plot that u added to each train file <end> <start> Jeremy: i think i'll just push the fasic_fcn file to my branch and you can pull it from there? <end> <start> Jeremy: idk what the easiest way to do this is <end> <start> Ester: sure I can try! <end> <start> Jeremy: ok I just pushed to my branch <end> <start> Ester: I've set up references.bib for  bibtex <end> <start> Ester: you can cite a paper using \citet{reference_name} and it will automatically appear in the References section <end> <start> Winfrey: @Jeremy Tow if you have extra time, could you double check the architecture for UNet? For some reason it isn‚Äôt doing well, we got IoU 0.0556 and accuracy 0.75 <end> <start> Jeremy: yea fs i‚Äôll check it in a bit <end> <start> Winfrey: Thank you! <end> <start> Ester: I‚Äôm trying 5a but data hub is not working for me right now <end> <start> Winfrey: Oohhh might be cause there are too many people. I had to wait for quite a bit until I get assign a node (I used ssh) <end> <start> Jeremy: if u need to i can give u access to my server <end> <start> Ester: it works again! <end> <start> Winfrey: Do we want to set a cutoff time for the models? For tomorrow. <end> <start> Ester: Jonathan and I both tried 5A but couldn‚Äôt get it better than 6.6% <end> <start> Ester: I‚Äôll go to office hours tomorrow <end> <start> Winfrey: Okkk! I‚Äôll probably go too üòÖ <end> <start> Jonathan: I‚Äôve got something around 0.06 IOU, I‚Äôll do my write up part but if we get something better by tmrw I can update it accordingly <end> <start> Jonathan: I did the abstract too <end> <start> Winfrey: Also, not exactly sure about the metric IoU but now I‚Äôm not sure if it can be expressed in percentage <end> <start> Winfrey: I have zero prior knowledge about IoU though, just purely based on articles that I read they put it in decimal <end> <start> Jeremy: i think it makes more sense in decimal <end> <start> Ester: Sure! <end> <start> Jeremy: ig its like the intersection is x percent of the union? <end> <start> Jeremy: but idk <end> <start> Winfrey: Yeah, sorry Ester,  I said percentage made sense this morning but I‚Äôm not sure anymore ü§îü§ìüòÖ <end> <start> Winfrey: thought I‚Äôd share. So there has been a mystery with 5c where by the accuracy and IoU just stop improving at one point even when validation loss is actually decreasing.  There isn‚Äôt any bug in the architecture, even though I did add some minor changes to the architecture but honestly nothing changed in terms of the results that we are getting <end> <start> Winfrey: And I read the original paper multiple times and many forums, and finally broke through the upper bound:  Kind of unexpected but it was because of a combination of the following: 1. Weight initialisation - I changed it to using normal distribution (which was mentioned in the paper)  2. Back to using SGD, cause for some reason the paper mentioned about using momentum <end> <start> Winfrey: So for 5a, it might be something that‚Äôs beyond the network architecture, not exactly sure but yeah <end> <start> Winfrey: Also one thing I didn‚Äôt really try is that, UNet paper mentioned that they use batch size of 1, but I‚Äôm not sure how helpful this will be <end> <start> Ester: How‚Äôs the new test IoU after these improvements? <end> <start> Winfrey: Still running but for val the highest so far is 0.057 (not great but I‚Äôm low-key traumatized by seeing the exact same 0.0556 for the past few hours üòÇüòÇüòÇ <end> <start> Jonathan: This is so real <end> <start> Ester: 0.0556 is interesting ‚Äî I was using a very different architecture and it also got stuck at that exact number <end> <start> Winfrey: this is so mysterious <end> <start> Ester: Hmm set seed is actually not working fully. The results are different after rerunning <end> <start> Jeremy: yea i was running into this too <end> <start> Jeremy: i thought urs would work cuz u included the cuda bit but mb there‚Äôs another random source we‚Äôre not considering <end> <start> Jeremy: like source of randomness lol <end> <start> Ester: I was pretty sure it worked at one point ü´†ü´†ü´† <end> <start> Ester: I'll try adding this <end> <start> Ester: 4c is still random <end> <start> Ester: but train.py is deterministic <end> <start> Ester: I checked that data augmentation should be reproducible. Then it's strange why not 4c <end> <start> Winfrey: Oohh like the random rotation and random crop? <end> <start> Ester: yeah the angles come out deterministic <end> <start> Jeremy: i tried doing the batch size of 1 thing mentioned in the unet paper and im getting better pixel acc of 0.73 but worse iou of 0.05432 <end> <start> Winfrey: I‚Äôm thinking - when batch size is 1, we will need a lot more epochs. How many epochs did you train on just now? <end> <start> Jeremy: when i did a batch size of 1 i augmented the training data so that each "img" is actually a composite of 16 images, so the amount of epochs needed is the same?? <end> <start> Winfrey: In this case, is the backward based on one image or 16 images? <end> <start> Jeremy: 16 i think <end> <start> Jeremy: well like technically its 1 image that is a composite of 16 imgs <end> <start> Winfrey: Yeah, like 15 different transformations of the same image + the original? <end> <start> Jeremy: umm i think its 16 different images <end> <start> Winfrey: Oh as in, one image is segmented into 16 pieces? <end> <start> Jeremy: yea <end> <start> Jeremy: so 1 image is like a 4x4 grid represnting 16 imgs <end> <start> Jeremy: i tried sgd as well and its worse <end> <start> Winfrey: Interestinggggg <end> <start> Winfrey: Maybe I can run it on your branch? And see if I get the same <end> <start> Jeremy: yea give me a bit to make it suitable for human viewing first lol <end> <start> Winfrey: Yeah take ur time! <end> <start> Jeremy: ok i just pushed its under jeremy-unet, the code is still vv scuffed but its kinda legible now. mainly i moved the batch_size argument to the voc, and i use the voc to combine the images. as a result batch_size has to be a perfect square <end> <start> Jeremy: also idk why yet but im consistently getting iou of 0.49 now <end> <start> Winfrey: For UNet ? <end> <start> Jeremy: yea <end> <start> Winfrey: Ok I‚Äôll look into it in the morning ü§ì thanksss!! <end> <start> Jeremy: just tried using batch sizes of 4 in the dataloader and 4 in the voc, validation in each epoch was giving good numbers but the final test iou was not as good <end> <start> Ester: 0.49? üòÆüòÆüòÆ <end> <start> Winfrey: The highest I‚Äôve gotten is 0.0627 <end> <start> Winfrey: @Ester Tsai can I confirm that u have already discussed Xavier and batch norm in the baseline method section? If so, I won‚Äôt include those in the introduction <end> <start> Winfrey: Kong voted for "Introduction" in the poll. <end> <start> Ester: I will try the architecture described in this lecture for 5A https://piazza.com/class_profile/get_resource/lr49jt48q953s2/ls80vuwtso635f <end> <start> Winfrey: Ester, is there a time that you would like me to finalize UNet? For plots and the final numbers (I‚Äôll take care of the segmentation result for one test data in visualize.ipynb <end> <start> Winfrey: I‚Äôm thinking latest by 6pm today, but I‚Äôm flexible <end> <start> Ester: I plan to put up the plots after we finalize our models ye <end> <start> Ester: 6pm sounds good <end> <start> Winfrey: Yeah <end> <start> Winfrey: Okay and once you run everything, could you push your version of 5b to main <end> <start> Ester: I can also fill in the segmentation result since it requires someone having all 7 models <end> <start> Winfrey: Yeah <end> <start> Winfrey: Sure <end> <start> Winfrey: Ok I‚Äôll get you the best possible UNet by 6 üòé <end> <start> Ester: Do you guys know how to get rid of the CUDA out of memory issue? <end> <start> Ester: Restarting the server used to help, but not this time <end> <start> Winfrey: Smaller batch size usually works for me <end> <start> Winfrey: And restarting <end> <start> Ester: for 5A I made the stride 1 and batch_size=4 and got this for epoch 1 <end> <start> Ester: 0.085 IoU <end> <start> Winfrey: NAISEEEEEE <end> <start> Ester: we'll see if it's gonna be good! <end> <start> Winfrey: and yeah this is interesting, I got 0.062 IoU only after changing the kernel size in UNet <end> <start> Ester: changing to what kernel size? <end> <start> Winfrey: All those 3*3 to 4*4 <end> <start> Winfrey: And final layer from 1*1 to 3*3 <end> <start> Ester: epoch 2 IoU: 0.1136 <end> <start> Ester: but I accidentally interrupted the training lol <end> <start> Ester: sad, each epoch takes 8 min to train <end> <start> Winfrey: Ahhhh <end> <start> Winfrey: That‚Äôs quite a while <end> <start> Winfrey: Like one hour for 6 epochs <end> <start> Winfrey: Is the network very deep? <end> <start> Winfrey: What we could do is have like 6-10epochs, then mention the complexity and efficiency in the discussion section <end> <start> Jonathan: im running for 10 epochs <end> <start> Jonathan: so ill report that result <end> <start> Ester: Yes I‚Äôm doing 10 epochs too for 5A <end> <start> Ester: Good news! TA just said Unet IoU will be graded very leniently <end> <start> Ester: 0.06 is on <end> <start> Ester: Ok <end> <start> Winfrey: OH THANK YOU!! <end> <start> Winfrey: Okay then I‚Äôll be able to finalize before 2pm! <end> <start> Winfrey: Did it take long to train 5b? The transfer learning model <end> <start> Winfrey: Just curious <end> <start> Ester: Yes, Jeremy said 15 min? <end> <start> Ester: Possibly longer <end> <start> Ester: SHEEEESH <end> <start> Ester: just by changing stride <end> <start> Ester: 5A we gucci <end> <start> Ester: @Jonathan Cheung could you experiment with having other layers too? TA said just changing stride is not big enough architecture change <end> <start> Jonathan: Yeah <end> <start> Ester: ^also remember to add a table for your architecture details like Jeremy and Winfrey did in the report <end> <start> Winfrey: finally something close to 0.07 <end> <start> Winfrey: thanks for the batch size = 4 idea HAHHA <end> <start> Ester: YOOOOO <end> <start> Ester: it trains pretty fast too <end> <start> Jonathan: 2 epochs gets training iou of 0.099 <end> <start> Jonathan: I modified kernel size as well <end> <start> Ester: Could you see if it gets higher than 0.12? <end> <start> Jonathan: 0.11 with leaky relu <end> <start> Winfrey: @Ester Tsai do you have a preference for pushing to main or pushing to my branch for you to compile the models? I‚Äôm only pushing train_5_c.py and unet.py <end> <start> Winfrey: For me to push to main or my branch** whichever is easier for you grab <end> <start> Jonathan: hows this <end> <start> Jonathan: this is with some kernel, acivation, and layer changes as well comapred to just stride <end> <start> Winfrey: Personally think that IoU greater than 0.07 IoU good enough and above 0.10 is GrEaT ü§£ <end> <start> Jonathan: ok then <end> <start> Winfrey: As long as we can justify we made sufficient changes to the architecture in the report and have some discussion, then we r good <end> <start> Jonathan: i can push the 5a code if thats fine with everyone <end> <start> Ester: Your branch is ok! I‚Äôll just copy paste for ease lol <end> <start> Jonathan: pushed <end> <start> Winfrey: ok pushed 5c to my branch as well! there's a high chance you won't get the exact same result, i believe it's the randomness that you mentioned yesterday <end> <start> Winfrey: master's README has been updated for submission later today! <end> <start> Ester: THANKS! <end> <start> Ester: I‚Äôve finished running 5A and will update the report with the plots for the Results section after my tutor hours <end> <start> Winfrey: Yeah no problem! Thank you! <end> <start> Winfrey: I can help cross check the architecture table when you are done @Jeremy Tow @Jonathan Cheung   @Jeremy Tow do you plan to add ResNet under related works? Just checking! <end> <start> Jeremy: i‚Äôll add the paper in <end> <start> Winfrey: Ok coools! <end> <start> Ester: Unet now has a lower accuracy <end> <start> Ester: I'll rerun it maybe? <end> <start> Winfrey: Oh wow test IoU is 0.11? <end> <start> Winfrey: That‚Äôs interesting <end> <start> Winfrey: Sure <end> <start> Ester: I changed train, val, and test batch size to 4 <end> <start> Ester: I'll double check that the IoU function is not dependent on batch size haha <end> <start> Winfrey: WOW <end> <start> Winfrey: What magic did you do <end> <start> Winfrey: üòÇüòÇüòÇ <end> <start> Winfrey: Dang UNet was crawling and now it‚Äôs flying <end> <start> Ester: LOL smaller batch size is better I learned <end> <start> Ester: jk this screenshot doesn't say much <end> <start> Ester: The batch size can be understood as a trade-off between accuracy and speed. Large batch sizes can lead to faster training times but may result in lower accuracy and overfitting, while smaller batch sizes can provide better accuracy, but can be computationally expensive and time-consuming. <end> <start> Winfrey: I seeee <end> <start> Winfrey: Interesting <end> <start> Winfrey: I like this sample!! <end> <start> Ester: O OOP my IoU implementation is not quite right <end> <start> Ester: It‚Äôs supposed to be over the entire validation set <end> <start> Winfrey: Eh really? I thought I checked <end> <start> Winfrey: Oh u mean the average? <end> <start> Winfrey: Or the iou function <end> <start> Ester: Hmm I think I did implement it according to the TA‚Äôs description <end> <start> Jeremy: isn‚Äôt the iou function supposed to be of a single prediction and target <end> <start> Jeremy: and then u average it in the train file <end> <start> Ester: I suppose it worked nonetheless <end> <start> Ester: But I‚Äôm averaging over each batch and then averaging all the batches‚Äô average IoU <end> <start> Ester: So the number might be a little odd <end> <start> Winfrey: Ohhh ok we are looking at the train files not the util iou right <end> <start> Winfrey: Oh util iou averages over the batch <end> <start> Ester: Util iou is right if the input is only one image, but right now the input is a batch of images <end> <start> Ester: Wait just kidding <end> <start> Ester: Let me think again <end> <start> Ester: Maybe the input is indeed just an image <end> <start> Ester: LOL sorry for psyching out we‚Äôre probably fine? <end> <start> Ester: But I discovered that when I make the test batch size smaller the IoU goes up, which it shouldn‚Äôt <end> <start> Winfrey: enumerate batch_loader gives a batch. So inputs are 16*3*224*224 <end> <start> Ester: O RIGHT <end> <start> Ester: hmmm let me go through the code and check <end> <start> Winfrey: Maybe in util iou np.nanmean can be done on a specific dimension <end> <start> Winfrey: Or do a double loop in util iou, so   loop through preds, targets:    Loop through all classes:    Np.nanmean for that particular one pred <end> <start> Ester: I‚Äôll try double loop <end> <start> Ester: Iou becomes 0.2619 for train.py <end> <start> Ester: I have a feeling that should be more accurate but the TA implemented it wrong? üòÆ maybe maybe not ü´® <end> <start> Ester: 0.05 felt too low <end> <start> Ester: So maybe they meant over the whole validation set instead of each individual image <end> <start> Ester: High key I will just revert back to what we had before because it matched the description well <end> <start> Winfrey: Actually‚Ä¶ we can keep it as is üòÇ <end> <start> Winfrey: Yeah <end> <start> Winfrey: Agreed <end> <start> Ester: I‚Äôll aim to be done by 9:30pm but <end> <start> Jeremy: oh ok i‚Äôll start working on it rn <end> <start> Ester: I‚Äôll update code to do full validation set after and see if there‚Äôs a big difference <end> <start> Ester: Samuel chu said he tried and it wasn‚Äôt very different <end> <start> Winfrey: Okkk double checking the architecture now <end> <start> Winfrey: Oh just joking, I‚Äôll wait a bit <end> <start> Winfrey: @Jonathan Cheung just checking, for 5a specifically, did you make any changes to  - weight initialization - data augmentation - optimizer - class weights <end> <start> Ester: just added all the plots <end> <start> Winfrey: yupp they look perfecto <end> <start> Winfrey: thankies! <end> <start> Jeremy: tysm tysm <end> <start> Jonathan: Learning rate I believe is 0.001 and the other thing is 0.0005 <end> <start> Jonathan: But I think that‚Äôs default <end> <start> Winfrey: Oh then did u use the learning rate scheduler? <end> <start> Jonathan: I think so? <end> <start> Winfrey: Okk <end> <start> Winfrey: Let me add that blurb saying that everything else is kept the same <end> <start> Winfrey: In the report <end> <start> Winfrey: Quick question, is there supposed to be a separate model Python file for 5a and 5b? <end> <start> Jeremy: oh shoot i didn‚Äôt make a sepearte train file for 5b <end> <start> Jeremy: so it kinda overwrites the 4c one <end> <start> Winfrey: Oh no worries, I think Ester got u <end> <start> Ester: I got it yeah! <end> <start> Winfrey: Ok I see it now! <end> <start> Ester: I‚Äôm waiting to get one more plot updated potentially <end> <start> Ester: But I will get the report done rn <end> <start> Ester: Please add writing to the results section if you guys can <end> <start> Ester: I just wanna get a better plot for 5A if possible <end> <start> Winfrey: Yes on it <end> <start> Winfrey: Ah <end> <start> Winfrey: Ester, I am seeing train_5_c has the old version <end> <start> Winfrey: Like it calls FCN and uses AdamW <end> <start> Ester: Ohh let me see <end> <start> Ester: I have the updated version locally but somehow didn‚Äôt update on GitHub <end> <start> Ester: I‚Äôll fix that rn <end> <start> Ester: Resubmitted code <end> <start> Ester: We still need to write some of discussion section <end> <start> Winfrey: Yeah for each of the models in 5, need to draw insights from table and visuals <end> <start> Winfrey: Currently we are only drawing from table <end> <start> Ester: The 5A test iou is not accurate, it should be lower <end> <start> Ester: I‚Äôm rerunning it but it‚Äôs too slow oop <end> <start> Ester: I‚Äôm adding to the discussion right now <end> <start> Winfrey: Hmmmm I‚Äôm kind of stuck with UNet‚Äôs discussion on the sample test segmentation, since it had worse results than the other two architecture, the test segmentation shows that UNet captures a lot of them üëÄ <end> <start> Ester: Weird yeah ü´£ <end> <start> Jonathan: Ok I‚Äôm back home, is there anything I need or finish up <end> <start> Winfrey: yes, could you check if 5a's discussion mentions the loss plot and the segmentation visual <end> <start> Ester: Still need to add something about the segmentation visual <end> <start> Jonathan: I‚Äôm not even sure what to write abt the segmentation part <end> <start> Jonathan: Like it looks like it‚Äôs much worse than the IOU and accuracy would say <end> <start> Jeremy: i just added the resnet paper to related work <end> <start> Jeremy: and i finished the architecture table for resnet <end> <start> Winfrey: ok added mention on the results plot and visual in part 4 + baseline <end> <start> Winfrey: I think some of us can start checking the entire paper <end> <start> Winfrey: @Jeremy Tow there are three layers numbered 31, is that intentional? <end> <start> Jeremy: oh shoot good catch <end> <start> Jeremy: fixed ty <end> <start> Winfrey: np! thanks <end> <start> Winfrey: ok I will stop writing for now, I think some of us might be working on the same section right now, I am starting to see some similar description üòÖ <end> <start> Winfrey: also i used present tense for everything and some of us used past tense.   we can stick with one for consistency purpose - whoever is checking the entire paper. <end> <start> Jonathan: I can chnage all the tenses to present <end> <start> Winfrey: ok thanks! <end> <start> Jonathan: Actually not understanding the segmentation visual, r the blobs supposed to look like the shape of the ppl? <end> <start> Winfrey: @Jeremy Tow could you check the code submission? I am not sure if the transfer learning file is actually reflecting the architecture in the report <end> <start> Jeremy: ok yea looking rn <end> <start> Ester: It might be the old version! <end> <start> Jonathan: "More specifically, a constant learning rate can cause the model to get stuck in local optima and result in a slower convergence or sub-optimal solution." is this sentence supposed to be referring to local minima? <end> <start> Jonathan: rather than "optima" <end> <start> Ester: Yes, but optima means the same thing right <end> <start> Jonathan: oh wait it means the same thing lol <end> <start> Jeremy: just checked, it looks good <end> <start> Winfrey: ok cools! I just realized that none of the encoder is actually called. sorry, got confused for a bit. <end> <start> Winfrey: thanks for confirming! <end> <start> Jeremy: yea the encoder is rollled up into the forward section of the FCN model <end> <start> Ester: Rerunning 5A <end> <start> Ester: It‚Äôs getting faster now <end> <start> Ester: 5 min per epoch <end> <start> Winfrey: nice nice <end> <start> Ester: It was 24 min or something earlier <end> <start> Jonathan: Everything except maybe a sentence or 2 in the last section are present tense, it should be ok because its a building off of the previous experiments? <end> <start> Ester: Is there a way to make the discussion section go after the results section‚Äôs figures? <end> <start> Ester: Right now discussion starts in between those figures <end> <start> Jonathan: page breaks? <end> <start> Winfrey: try \newpage <end> <start> Ester: It‚Äôs already there haha <end> <start> Winfrey: forcing new page on new section <end> <start> Ester: No idea why item doesn‚Äôt help <end> <start> Winfrey: ohh <end> <start> Winfrey: ok fixed! <end> <start> Winfrey: use \clearpage instead <end> <start> Ester: Is it intentional we made the images smaller? <end> <start> Ester: 2 per page seems to fit pretty well <end> <start> Winfrey: ya I made it smaller but it was before we organize the report <end> <start> Winfrey: so feel free to make new changes haha <end> <start> Jonathan: is everyhting else finalized? <end> <start> Winfrey: yes on my end <end> <start> Ester: Sure! <end> <start> Winfrey: good work! <end> <start> Jeremy: tysm tysm <end> <start> Jonathan: i can submit? <end> <start> Ester: The time crunch is real ü´£ <end> <start> Ester: I‚Äôm looking through it again but feel free to submit <end> <start> Winfrey: Wait sorry <end> <start> Winfrey: The architecture for transfer learning <end> <start> Winfrey: I‚Äôll fix it, gimme 1 min <end> <start> Winfrey: Ok done! <end> <start> Jonathan: ok ill usbmit now <end> <start> Winfrey: Thank you Jonathan! <end> <start> Jonathan: ok i added u guys, check if u can see the reprot on gradescope <end> <start> Winfrey: Yup! <end> <start> Ester: I‚Äôll need to resubmit it lolol I made some changes <end> <start> Jonathan: lel <end> <start> Jonathan: i can resubmit it again then, idk if it messes up if theres diff submissions from diff ppl in the ame team <end> <start> Jonathan: lmk when ur finsihed changing <end> <start> Ester: My 5A is almost done lol <end> <start> Ester: Let me check the results <end> <start> Ester: Dang it‚Äôs cutting real close <end> <start> Ester: I‚Äôll resubmit right now just in case <end> <start> Jonathan: do u want me to do it? <end> <start> Ester: I‚Äôm updating something rn <end> <start> Ester: Ok just submitted, will add people <end> <start> Ester: Done! Sorry for cutting it so close! <end> <start> Winfrey: Thanks hehe <end> <start> Winfrey: No no, not at all <end> <start> Ester: Please check if it‚Äôs good <end> <start> Jonathan: nice job <end> <start> Winfrey: All good, thanks for the good work everyone!! Get some good rest for now üò¥ <end> <start> Ester: YAY <end> <start> Jeremy: tytyty <end> <start> Winfrey: Group name is recurrent for PA3! <end> <start> Ester: Yayay! <end> <start> Ester: Joined <end> <start> Ester: You named the group CSE 151B PA3. <end> <start> Winfrey: Thanks for the name update that‚Äôs very thoughtful of you HAHA <end> <start> Ester: You added Samuel Chu to the group. <end> <start> Ester: @Samuel Chu if you‚Äôd like to join! <end> <start> Winfrey: I will get started on the programming part tonight, has anyone started working on it? Just wanted to see where I should start with, in case some parts have already been completed <end> <start> Ester: I plan to start at 3:30pm! <end> <start> Winfrey: Okie I can check with you tonight when I start! <end> <start> Jeremy: i‚Äôm prob going to start working tonight or tmr, if i do start today i‚Äôll lyk <end> <start> Ester: Actually I‚Äôll start maybe tonight! Gonna crank out some tutor stuff that‚Äôs time sensitive <end> <start> Winfrey: Yup yuppp no worries! <end> <start> Winfrey: Heloo, I made changes to fix the indentation issue mentioned on Piazza and pushed the main branch. None of the body content is changed, just indentation <end> <start> Winfrey: There has been quite a few typos in the given template from what I have seen in Piazza. I fixed most of them and pushed to main  Another typo that is not on main  In util, get_random_song_slice takes in string data not list  Similarly, get_random_song_sequence_target takes in song in string format not list <end> <start> Winfrey: https://piazza.com/class/lr49jt48q953s2/post/496   ^ the post about it <end> <start> Winfrey: I should be able to get the baseline out today  But without the generate.py <end> <start> Ester: Thank you Winfrey! <end> <start> Ester: I‚Äôll do the individual part first and then get on the code <end> <start> Winfrey: I‚Äôve push a working model to my branch called winfrey (should cover up till Q3) <end> <start> Winfrey: The loss I‚Äôm getting is lower (0.06) than expected (1.9) so I‚Äôm still clarifying with the TA on loss calculation - there‚Äôs a bunch of averaging going on ü•≤ <end> <start> Ester: I see!! I‚Äôm done with the individual part so I‚Äôll be able to get to the code tomorrow! <end> <start> Ester: Or later tonight üòÆ <end> <start> Ester: Wowow this PA seems fun <end> <start> Ester: I‚Äôll work on it today <end> <start> Ester: Just learned the ABC notation üò≥ <end> <start> Winfrey: Yaaahhh heheh <end> <start> Winfrey: The lowest loss I get so far is 2.1679, Im making changes to the optimizer to find the one that gives the closest to 1.9  Other than that, my branch is the most updated of my progress <end> <start> Ester: @Jeremy Tow @Jonathan Cheung @Samuel Chu any progress so far? üòÉ <end> <start> Winfrey: I‚Äôll be occupied with midterm and capstone until the weekend, so I‚Äôll build off whatever we have by then <end> <start> Jonathan: I‚Äôve done literally nothing but I‚Äôll try for part 4 <end> <start> Samuel: I also haven't done anything but I'll start today <end> <start> Jeremy: little bit, just slowly working through <end> <start> Ester: RuntimeError: cuDNN version incompatibility: PyTorch was compiled  against (8, 7, 0) but found runtime version (8, 6, 0). PyTorch already comes bundled with cuDNN. One option to resolving this error is to ensure PyTorch can find the bundled cuDNN.Looks like your LD_LIBRARY_PATH contains incompatible version of cudnnPlease either remove it from the path or install cudnn (8, 7, 0) <end> <start> Ester: The Piazza post about this issue did not help lol <end> <start> Ester: btw here is the Overleaf report link for PA3! https://www.overleaf.com/7724919614fydpcydwnbfj#9c10da <end> <start> Ester: Has anyone else figured out how to solve this? <end> <start> Winfrey: Looking at it now <end> <start> Winfrey: You got the error when u were trying to install PyTorch? <end> <start> Ester: No, when I run main.py <end> <start> Ester: This is me lol <end> <start> Ester: conda install does not even finish installing and bugs out haha <end> <start> Ester: pip install doesn't solve the problem <end> <start> Ester: O I FIXED IT <end> <start> Winfrey: OH how <end> <start> Ester: unset LD_LIBRARY_PATH <end> <start> Winfrey: OH LOL <end> <start> Winfrey: Anything that has to do with PATH is very painful <end> <start> Ester: Does that mean I'm not using CUDA tho? <end> <start> Ester: it's very slow oop <end> <start> Winfrey: No I don‚Äôt think so, the forum that I read says it‚Äôs just old version stuffs <end> <start> Winfrey: Wifi matters a lot üòÇ <end> <start> Ester: I'm training on cpu oops <end> <start> Winfrey: It‚Äôs slower when I run at school <end> <start> Winfrey: Hmmmm <end> <start> Ester: but that's what the TA suggested <end> <start> Ester: how long does it take for you? <end> <start> Winfrey: Like one hour <end> <start> Winfrey: For 100 epochs <end> <start> Ester: oh me too then <end> <start> Ester: jk it's slower for me <end> <start> Winfrey: Ahh cause it‚Äôs on cpu? <end> <start> Ester: yeah : // <end> <start> Ester: O IM OK NOW <end> <start> Ester: I'm using capstone platform <end> <start> Ester: instead of datahub <end> <start> Ester: YAYAYAYAYYAYAYYAYAYAYY <end> <start> Winfrey: Oh THATS GREAT <end> <start> Ester: CAPSToNE SUPREMEM <end> <start> Winfrey: Honestly, I have never used datahub once <end> <start> Ester: it's really fast, like 3 epochs per minute? <end> <start> Winfrey: Like this‚Ä¶? <end> <start> Ester: Is it about the same? <end> <start> Winfrey: Wow urs is slightly faster actually <end> <start> Ester: I use n 30 <end> <start> Ester: It‚Äôs a bigger GPU although not sure if that affects speed? <end> <start> Winfrey: Ooohhh I seeeee <end> <start> Jeremy: i‚Äôm curious what gpu it is lol <end> <start> Ester: it's called "a5000" <end> <start> Ester: Is 2.1679 the validation loss? <end> <start> Ester: is it correct there is no test loss? <end> <start> Winfrey: This is with using Adam, lr=0.001 and weight decay = 0.00001 <end> <start> Winfrey: Also TA suggested running with more epochs, I‚Äôve only been running 100 epochs <end> <start> Winfrey: And probably seed 10 <end> <start> Winfrey: And yeah no test loss, not given in the starter code <end> <start> Ester: do you know if we are allowed to change other configs like SEQ_SIZE <end> <start> Winfrey: ah that I‚Äôm not sure. I thought we are not supposed to change anything in the config until like 5 mins ago a TA said try more epochs <end> <start> Ester: hmm I suppose instruction said to use SEQ_SIZE=25~30 <end> <start> Winfrey: Ohhh good catch! <end> <start> Ester: true more epochs might help. the validation loss is still decreasing <end> <start> Ester: I'm gonna work on generate.py for now <end> <start> Winfrey: coooools I‚Äôll keep it running in the background while I do other stuffs üòÇ <end> <start> Jonathan: What is this? <end> <start> Ester: Don't do that haha <end> <start> Ester: it removes CUDNN basically <end> <start> Jonathan: I‚Äôm getting the same error, you fixed it by switching to capstone stuff? <end> <start> Ester: so it solves the error but you can only use CPU <end> <start> Ester: yes <end> <start> Ester: I ssh from terminal, not datahub <end> <start> Jonathan: Like using the capstone jupyterhub or ssh ing? <end> <start> Jonathan: Ok yeah <end> <start> Ester: rn the code for generate.py works but the result is not functional <end> <start> Winfrey: So.. do we have to remove the unknown characters? <end> <start> Winfrey: In generate <end> <start> Winfrey: I‚Äôm not sure if those bolded characters are identified as unknown <end> <start> Ester: the bold shows bad syntax (system can't recognize what it wants to do) <end> <start> Winfrey: I see <end> <start> Winfrey: So there‚Äôs gonna be some way we need to figure out to control/process them before putting into the converter <end> <start> Ester: For generate.py, Is it correct that the model should only take in the most recent prediction as the input? <end> <start> Ester: I wonder how it knows what the context is if I do that <end> <start> Winfrey: There‚Äôs the hidden state that saves the context <end> <start> Ester: Let me fix something real quick and check again <end> <start> Winfrey: Okk <end> <start> Ester: @Winfrey Kong when you finish training, could you send me the model checkpoint if possible? or I can just send you my generate.py <end> <start> Winfrey: Yuppp! <end> <start> Jonathan: @Ester Tsai r u sshing into capstone and using cpu? <end> <start> Ester: No, GPU <end> <start> Jonathan: im getting the same error even on gpu lol <end> <start> Ester: This is the extended fur elise <end> <start> Ester: X:1759 T:F\"ur Elise T:Bagatelle No.25 in A, WoO.59 C:Ludwig van Beethoven O:Germany Z:Transcribed by Frank Nordberg - http://www.musicaviva.com F:http://abc.musicaviva.com/tunes/beethoven-ludwig-van/be059/be059-pno2.abc V:1 Program 1 0 Piano V:2 Program 1 0 bass Piano M:3/8 L:1/16 Q:3/8=40 K:Am V:1 e^d|e^deB=dc|A2 z CEA|B2 z E^GB|c2 z Ee^d| V:2 z2|z6|A,,E,A, z z2|E,,E,^G, z z2|A,,E,A, z z2| (DD (FABA A2c|defg abag|(3fee f2 (3gag (3gfe (3dcB BA|1 GAAF Ldeg|bagf gab|ede dcBA|adcB cBAG|FAFA FABd|1 (3BGA ABdB CAFA|d3ef d2fg|(3efe deBd| ecAd edcA|(3BAF GBAA| G2GF A2BG ABcA| AAF AFE|eAAF ABdB|cAA ABA|A GFG A2d:| <end> <start> Ester: best val loss so far 2.0089 <end> <start> Ester: AdamW lr=1e-3 <end> <start> Winfrey: Nice niceeeee <end> <start> Ester: my newest progress is on ester2 branch <end> <start> Ester: haven't done hyperparamter tuning yet but I set up the plot name to reflect different hyperparameter choices <end> <start> Ester: might be helpful to make a branch from my branch <end> <start> Jeremy: ur so amazing <end> <start> Ester: @Jeremy Tow @Samuel Chu does the GPU work for you guys when you run Python main.py? <end> <start> Ester: Also our current val loss is ok! We can move on to hyperparameter tuning,. I;ll start that tonight <end> <start> Winfrey: Yayyy!! Thank you!! <end> <start> Samuel: im trying to run the main.py on your branch on gpu but im getting this error: <end> <start> Samuel: is it supposed to be config['dropout']? <end> <start> Ester: O yeah small typo <end> <start> Samuel: okay <end> <start> Ester: It‚Äôs config[‚Äúmodel_type‚Äù] <end> <start> Samuel: okay thaks <end> <start> Samuel: i got the same error that jonathan got and you were getting earlier <end> <start> Samuel: using datahub tho. i could try ssh <end> <start> Ester: Piazza someone said they created a new conda environment and installed pytorch and it worked <end> <start> Samuel: oh okay. ill try that <end> <start> Samuel: lol im getting a new error after using a conda env: <end> <start> Samuel: for some reason torch.cuda.is_available() is false <end> <start> Ester: Did you request a GPU when you ssh? <end> <start> Ester: Just updated my branch more for hyper parameter tuning. Gonna run it overnight and get all the results <end> <start> Ester: Does anyone understand how to do part 6 (feature evaluation)? Is the ‚Äúactivation of each neuron‚Äù the result of calling model.forward()? <end> <start> Ester: Currently doing AdamW with lr=1e-3 and no weight decay, but you guys should try different optimizer setup and see if results are different üòÆüòÆ <end> <start> Ester: run these to test hyper parameters if you clone my latest branch! python main.py python main.py --config config_RNN.json python main.py --config config_200_neurons.json python main.py --config config_250_neurons.json python main.py --config config_dropout_0.2.json python main.py --config config_dropout_0.3.json <end> <start> Ester: Hold on gonna fix something small real quick <end> <start> Winfrey: Not too sure, I only remember seeing a post on piazza about softmax and temperature <end> <start> Ester: lol that‚Äôs my post <end> <start> Ester: I think I figured the temperature out <end> <start> Ester: But I will ask in OH today to confirm <end> <start> Ester: Finished updating! Now we can know the training loss that correspond to the min Val loss <end> <start> Ester: Can we call at 3pm today to do a quick check-in for what to get done over weekend? <end> <start> Ester: @everyone <end> <start> Winfrey: Yasssss <end> <start> Winfrey: I have midterm at 4 so I‚Äôll can only stay until 3.30pm for the call <end> <start> Winfrey: @Ester Tsai @Jonathan Cheung logistic is actually a nonlinear technique, good job!! ü§£üéâ <end> <start> Ester: Huhhhhh <end> <start> Ester: I‚Äôm working on the heat map, almost done <end> <start> Winfrey: What‚Äôs the lowest val loss so far with hyperparameter tuning? <end> <start> Ester: Baseline is still the best <end> <start> Ester: 2.008 <end> <start> Winfrey: Interesting <end> <start> Winfrey: Thanks!! <end> <start> Ester: Reminder we will call at 3pm <end> <start> Ester: I‚Äôll go to the 2-3pm OH <end> <start> Ester: The heat map has been implemented but it has a small bug <end> <start> Ester: only the first 20 chars show up <end> <start> Ester: Jk he moved it again so there‚Äôs no OH rn <end> <start> Ester: I‚Äôm ready call anytime if you guys are <end> <start> Ester: https://ucsd.zoom.us/j/93496884535 <end> <start> Jeremy: wait i‚Äôm not ready <end> <start> Ester: what time works for you? <end> <start> Jeremy: like in 5 mknjtes <end> <start> Winfrey: Ah can we keep it at 3? I‚Äôm at work until 3pm and I have a consultation at the moment <end> <start> Ester: ok! <end> <start> Jonathan: I‚Äôll get on soon, in capstone meeting rn <end> <start> Ester: let's do 3pm still <end> <start> Ester: both winfreya nd I will need to leave by 3:30 <end> <start> Ester: https://docs.google.com/document/d/1nJQMPYDRe2u6rF9DQKSnqh1L9nu2qlguvrrr8XS9Ofc/edit <end> <start> Ester: https://www.overleaf.com/7724919614fydpcydwnbfj#9c10da <end> <start> Ester: ^ report <end> <start> Ester: ok I pushed latest changes! <end> <start> Samuel: i tried ssh'ing into capstone gpu but that gave me the same error also <end> <start> Ester: To clarify the most updated branch is ester2! Ignore the original Ester <end> <start> Samuel: @Winfrey Kong do you think you help me fix the gpu error i‚Äôm having with capstone gpu later today? <end> <start> Winfrey: Oh yeah ofc <end> <start> Winfrey: Is 8.30 ok? <end> <start> Samuel: hmm i might not be home til 9-9:15üò¨ <end> <start> Samuel: would 9:15 work? <end> <start> Winfrey: Okiee <end> <start> Samuel: thanks <end> <start> Samuel: Samuel Chu is inviting you to a scheduled Zoom meeting.  Topic: Samuel Chu's Personal Meeting Room  Join Zoom Meeting https://us05web.zoom.us/j/4658153808?pwd=sasbq5aNFoJprBhAtUUwlrKKsOLhlP.1  Meeting ID: 465 815 3808 Passcode: meeting <end> <start> Winfrey: Okie coming <end> <start> Samuel: do you want to set a new meeting? <end> <start> Winfrey: https://ucsd.zoom.us/j/91954366855 <end> <start> Samuel: update: Winfrey showed me what she did on the capstone gpu, but it still isn't working on my end :| so I think she will try to train a model with new hyperparameters tmr maybe? <end> <start> Ester: Okok! You could still write the report using the plot results on my branch if needed üëåüëå <end> <start> Samuel: okay is there stuff that you tested that is not on the report already? <end> <start> Ester: I have the basic set of results that the report needs (loss plots, heatmaps, and the training/val loss are in the model checkpoint names), but we can test more models and get better results <end> <start> Winfrey: Training with 150 sequence length right now, it‚Äôs training slower so‚Ä¶  ‚Ä¶ will mostly hear back from me after 2 hours üòÇüòÇ <end> <start> Winfrey: Code is still running but I got 1.988 lowest so far with sequence length of 70 <end> <start> Winfrey: I think we can go ahead with sequence length of 70, and the training speed is acceptable <end> <start> Jeremy: i trained with a sequence length of 300 and let it run the whole day, i‚Äôll let you guys know the loss after i get back to my computer <end> <start> Winfrey: Training with sequence length of 50 is even better. Got 1.97 at epoch 198, also faster for sure <end> <start> Winfrey: okie I think I will settle with sequence length of 50 for now <end> <start> Winfrey: will also see what Jeremy gets with sequence length of 300! <end> <start> Winfrey: baseline model plot <end> <start> Jeremy: its kinda not good <end> <start> Winfrey: I‚Äôm thinking if it‚Äôs overfitting <end> <start> Jeremy: yea :( <end> <start> Winfrey: But also getting 2.0 something at epoch 151 is kinda okay ish? <end> <start> Winfrey: Oh sorry my bad, I saw epoch instead of iter <end> <start> Winfrey: Ignore this heh <end> <start> Winfrey: Ah I see <end> <start> Winfrey: Just very very slightly higher <end> <start> Jeremy: def not worth doing <end> <start> Winfrey: Would you like to try sequence length of 50? to make sure my GPU is not overly optimistic haha <end> <start> Jeremy: ok yea fs let me do a run rn <end> <start> Winfrey: Okkk <end> <start> Jeremy: oh how many neurons are u using <end> <start> Winfrey: 150 <end> <start> Winfrey: Epochs 260 <end> <start> Jeremy: oh wait no im stupid i ran it with 30 instead of 200 i forgot to update the config file fully uhhhhhhh <end> <start> Jeremy: i will run it again lol <end> <start> Jeremy: i'll run both 200 and 50 again and report back <end> <start> Jeremy: skulling <end> <start> Winfrey: OH LOL <end> <start> Winfrey: Hahaha okieee <end> <start> Winfrey: And I‚Äôll generate the plots for hyperparamter tuning using sequence length of 50 and all else constant except for the specific hyperparamter , I‚Äôll take the neurons config, and would you like to take the dropout configs? <end> <start> Jeremy: okok <end> <start> Jeremy: do i even try 200 lol the training time is obscene <end> <start> Winfrey: One round takes like 1.5hours to 2 hours for me (cause sometimes my wifi drops lol   So I def won‚Äôt be able to do all configs in one day <end> <start> Winfrey: How long did it take üòÇ <end> <start> Winfrey: Oh I‚Äôm joking <end> <start> Winfrey: I mean.. only if u want to keep it running overnight üòÇ <end> <start> Jeremy: like fully 4 minutes per epoch i think <end> <start> Winfrey: I tried 150 and it got too miserable at one point I forgot how long I waited so I just interrupted it üòÇüòÇüòÇ <end> <start> Jeremy: so like 17 hrs <end> <start> Winfrey: Ouchy, wait how is ur GPU billed? <end> <start> Jeremy: i have my own gpu lol <end> <start> Winfrey: Ohhhhh like u own it? <end> <start> Jeremy: its like ever so slightly slower than the datahub ones i think? but like more reliable and i dont have to worry about my connection dropping <end> <start> Jeremy: yea its sitting in my computer next to me rn lol <end> <start> Winfrey: when u said u have one, I was thinking that you actively rent/pay on demand from like Amazon <end> <start> Winfrey: üòÇ that‚Äôs very cool <end> <start> Jeremy: oh man i could never aws is so expensive <end> <start> Winfrey: OH REALLY dang I thought they always sell themselves as a cheaper option or like pay as you go, no hidden fee, low cost etc <end> <start> Jeremy: like idk i dont think id want to spend any extra money for class lol <end> <start> Jeremy: yea i think im just going to stop at 50 <end> <start> Jeremy: 300 is taking soo long ive gone through 3 epochs so far <end> <start> Jeremy: training 50 takes me about 1:10 per epoch <end> <start> Winfrey: Yeah does take a while, I think datahub might be faster but not really too significant? I haven‚Äôt really timed it properly. Anyway, if we train the full 260 epochs each time, we can probably only do like 3-4 rounds per person per day (for the amount of time that we are awake üò¨ <end> <start> Jeremy: if it takes around 2 hrs for datahub then its like twice as fast lol mb i'll switch <end> <start> Jeremy: mb i'll do runs on datahub and my personal gpu concurrently <end> <start> Winfrey: I could be wrong cause I just start it and work on other stuffs üòÇüòÇ it could actually be 3-4 hours but yeah I think running on both is a good idea if that‚Äôs manageable <end> <start> Jeremy: i just timed a single epoch and extrapolated <end> <start> Ester: Should I try running anything when I‚Äôm back or just focus on the report? <end> <start> Winfrey: Hmmm I‚Äôd say.. we‚Äôll see? I was thinking that you‚Äôd want to rest and settle down once u get home. I think I will be able to run 2 full rounds by afternoon (covering all of hyperparamter part b) <end> <start> Jeremy: i will run these three <end> <start> Jeremy: seq length of 50 <end> <start> Ester: Woah nice <end> <start> Ester: Should we just go with the results you guys got? <end> <start> Ester: Lmk if I can help run anything! <end> <start> Winfrey: Yup yup <end> <start> Winfrey: Yes! could you run config 250 neurons with sequence length 50? <end> <start> Ester: AdamW lr=1e-3? <end> <start> Winfrey: Yupp everything else the same <end> <start> Ester: how about the existing result on report? <end> <start> Winfrey: Ohh I pushed a small fix for train.py last weekend so u might need to check with git pull <end> <start> Ester: okok! <end> <start> Winfrey: I updated row 1 <end> <start> Winfrey: Row 2 still running <end> <start> Winfrey: As in, the current row 1 is accurate <end> <start> Ester: Which branch should I pull? <end> <start> Winfrey: ester2 <end> <start> Ester: Okok! <end> <start> Ester: Oo what was the bug in train.py? <end> <start> Winfrey: Remember u said u added to SongRNN to return x0 or x1 <end> <start> Winfrey: So now the songrnn forward returns output, _ instead of just output <end> <start> Ester: Got it! <end> <start> Ester: Now running config_250_neurons and the RNN next if it‚Äôs not done already <end> <start> Samuel: im kind of confused on temperature can affect how deterministic the model is. bc if we run these values: 5, 10, 15 though a softmax no matter what we divide each element by, when we pick the element with the highest softmax value it will always be the 2nd index(15) right? <end> <start> Ester: We are not picking the element with the highest soft max value <end> <start> Ester: Soft max value goes into torch.multinomial to serve as a list of probabilities <end> <start> Ester: Torch.multinomial randomly selects a character to output <end> <start> Samuel: ohhh <end> <start> Samuel: ok <end> <start> Ester: I'm updating the related works section with citations <end> <start> Ester: feel free to double check and add more <end> <start> Ester: I'm done with my written portions! Lmk if another section needs help <end> <start> Ester: I pushed my results for config_250_neurons.json and added the train and val loss to the report <end> <start> Winfrey: Gosh it finished? <end> <start> Ester: LOL YEAH <end> <start> Winfrey: So fast!! ü•≤ <end> <start> Ester: result is worse than baseline but better than sequence length 30 <end> <start> Ester: overfitting on training <end> <start> Samuel: what does increasing the number of neurons do in the lstm? cuz i thought the lstm just used gates <end> <start> Samuel: does it increase the amount of information that can be stored in the cell state or something? <end> <start> Winfrey: For this PA, neurons = number of features in hidden state <end> <start> Samuel: ok <end> <start> Samuel: hidden state = cell state? <end> <start> Winfrey: Our LSTM is a single layer one, so it‚Äôs only one LSTM <end> <start> Samuel: oh really <end> <start> Samuel: ok <end> <start> Winfrey: They r different in LSTM <end> <start> Winfrey: In RNN, there‚Äôs only hidden state, no cell state <end> <start> Samuel: oh okay <end> <start> Samuel: thanks <end> <start> Winfrey: The last hyperparameter tuning will be ready shortly! 48 epochs left üò™ <end> <start> Jeremy: i have 200 epochs left on the rnn run and after that i‚Äôll be finished i think <end> <start> Ester: I ran the rnn earlier actually! but you can verify the results with mine <end> <start> Jeremy: oh even better <end> <start> Jeremy: ig ill do generation with different temperatures <end> <start> Jeremy: and then fill out that part of the report <end> <start> Jeremy: i‚Äôll just take the model with the best loss? <end> <start> Ester: how are the results on different dropouts? <end> <start> Ester: is the report the most up to date? <end> <start> Jonathan: I need to do abstract and intro rn <end> <start> Ester: which one is this? <end> <start> Jeremy: it should be, but the numbers look kinda weird so i‚Äôm planning to rerun it overnight <end> <start> Jeremy: i might have mistyped a parameter or smth <end> <start> Ester: aight I can run it too <end> <start> Ester: so far baseline is still the best <end> <start> Winfrey: 250 that I‚Äôm running atm is slightly better than baseline <end> <start> Winfrey: Once this is done, if this is the best we have so far, I‚Äôll generate the heatmaps with this model first. If someone gets a better model, feel free to replace the neuron heatmaps <end> <start> Winfrey: @Ester Tsai did you find training RNN faster or slower than LSTM? Or roughly the same <end> <start> Winfrey: Ok added results and plot for 200 neurons, will generate the heatmaps now <end> <start> Ester: Oops I didn‚Äôt time it. Would it be helpful if I rerun part of it to time it? <end> <start> Winfrey: @Jeremy Tow could you add your plots for the dropout experiments? I think they might be helpful for Sam‚Äôs parts <end> <start> Winfrey: Ohh no worries! No need hehe <end> <start> Winfrey: @Ester Tsai is there anything that I should do to adjust the spacing..? <end> <start> Jeremy: the loss ones? <end> <start> Winfrey: yes <end> <start> Winfrey: the loss plots <end> <start> Jeremy: ok will do <end> <start> Jonathan: Does the ‚Äú93 unique characters‚Äù refer to all the possible outputs in abc format for each note? <end> <start> Winfrey: Yes <end> <start> Ester: Sure! We can make the figure a little wider and less tall <end> <start> Winfrey: @Jonathan Cheung I uploaded all the heatmaps from our best trained model under the figures folder. Are you able to see them? <end> <start> Jonathan: Yeah I can see the figures <end> <start> Winfrey: I‚Äôm thinking of letting you choose 3 heatmaps from there? Those that are more explainable for the discussion section <end> <start> Winfrey: Then I‚Äôll put the 3 that u choose to discuss under results <end> <start> Jonathan: Ok, I‚Äôll choose 3 between the 0-140 heatmaps <end> <start> Winfrey: Okie thanks <end> <start> Jeremy: i uploaded the dropout plots under figures, the sequence length is wrong so i‚Äôll update them by tmr morning but for now if anyone needs them they‚Äôre there <end> <start> Winfrey: @Jeremy Tow for song generation (results part 6b), this is the best model i have with me. also the best we have so far <end> <start> Winfrey: ah nvm it's not allowing me send here <end> <start> Winfrey: ok I push the best model to branch ester2, path is checkpoint/best_0219 <end> <start> Jeremy: tysm <end> <start> Winfrey: the config to use is config_200_neurons.json <end> <start> Jonathan: 60, 140, 100? for the 3 heatmaps? I think I could point out how the highe activations are on A and F for 60, and the repeated high activation on the similar strucutre phrase for 140. 100 im not so sure but probably having to do with the header. Or I could do 20 because the low activation is always on the blank space <end> <start> Jonathan: Also are we going with our ‚Äúbest model‚Äù as the one with lowest Val loss? <end> <start> Winfrey: Yes <end> <start> Samuel: do we need to specify our sequence length for table 1 in results? <end> <start> Ester: We will need to describe it in the methods section <end> <start> Samuel: ok <end> <start> Samuel: is it always 30? <end> <start> Ester: It‚Äôs always 50 <end> <start> Samuel: has anyone generated plots for the bottom 3 rows? <end> <start> Samuel: i couldnt find any on github <end> <start> Winfrey: They are under the figures folder in overleaf <end> <start> Jonathan: im gonna add heatmaps in the results section so i can reference them in discussion section, the formatting will sucj but we can fix it up later <end> <start> Jonathan: @Winfrey Kong <end> <start> Winfrey: Yup yup <end> <start> Jonathan: Also does red correspond to low or high activation? <end> <start> Ester: High activation <end> <start> Ester: You can see the example in the PA3 instruction <end> <start> Jonathan: Ok the formatting is fixed and discussion added for the heatmaps. I added a page break so that the loss plots under the hyper parameter tuning sections so the graphs are correctly placed <end> <start> Jonathan: Take a look to check it over <end> <start> Jonathan: Also can someone explain the difference between many in, many out and simultaneously many in, many out? Does the language translation work for both? <end> <start> Jeremy: https://stanford.edu/~shervine/teaching/cs-230/cheatsheet-recurrent-neural-networks#overview <end> <start> Jeremy: not rly an explanation but heres the site where i think they stole the graphics from lol <end> <start> Jeremy: mb simult many in many out doesnt work for translation bc u kinda need to know the full sentence before u can translate it <end> <start> Samuel: btw i think im done with my part too <end> <start> Jeremy: what were the hyperparameters u used when training this model? <end> <start> Winfrey: u can find it in this config. I remember the more general ones like 200 neurons, Lr 1e-3, dropout 0.1 and LSTM model <end> <start> Jeremy: oh i didn‚Äôt see that message oops <end> <start> Jeremy: tyty <end> <start> Ester: @Jeremy Tow could you add your contributions at the end of the report? <end> <start> Jeremy: yep right after i finish running the temperature expirements <end> <start> Winfrey: Also I‚Äôll push ester2 to main at 8pm, lmk before that if there‚Äôs any pending code changes <end> <start> Winfrey: ok main repo is updated, the pa doc didnt say anything about what to not submit, so i only kept the configs folder and data folder <end> <start> Winfrey: would anyone like to proofread the report before we submit? I think it'd be nice to have one or two of us go through and standardize our writeup, e.g. past/present tense etc.   I used present tense for most if not all of my parts but i'm good with either past or present. <end> <start> Samuel: ok i can <end> <start> Winfrey: thank you very much! <end> <start> Jeremy: im almost done with my part, just generating a bunch of songs with different temperatures to get statistics <end> <start> Winfrey: yupp all good! <end> <start> Winfrey: oh yeah the PA doc also said to include their music representation generated from https://notabc.app/abc-converter/  I'm assuming it means that we have to include the music notation <end> <start> Jeremy: i uploaded the txt files and the midi files to the overleaf project <end> <start> Winfrey: ooo were there any notes that the converter flagged as invalid or unrecognized notes? <end> <start> Jeremy: so many <end> <start> Jeremy: so so many <end> <start> Jeremy: the higher the temperature the more errors <end> <start> Winfrey: AHAHHAHA <end> <start> Jeremy: i tried a bunch of generations and at temp = 2 it was like multiple pages of errors <end> <start> Winfrey: right, as it is more creative (or hallucinates more) haha <end> <start> Jeremy: artists on drugs be like <end> <start> Winfrey: HAHHAHAHAHAH spot on <end> <start> Ester: Not me laughing out loud <end> <start> Samuel: okay i proofread the report <end> <start> Jeremy: ok my part is done, i'm just a little iffy on this one bit that i wrote <end> <start> Jeremy: is that correct? <end> <start> Ester: Seems reasonable <end> <start> Winfrey: Yeah it makes sense to me <end> <start> Winfrey: Also that‚Äôs a very good observation üôåüèº <end> <start> Jonathan: Are we read to submit? <end> <start> Jonathan: I can do a final read through if we need <end> <start> Winfrey: Code is ready <end> <start> Jonathan: everything is in present tense, looks good <end> <start> Jonathan: if theres no other changes I can submit <end> <start> Winfrey: Can someone double check the requirement here? I might have understood it wrongly but it looks like they asked for the ABC notation (which we have) and the music representation/notation (which we don‚Äôt have at the moment) <end> <start> Jeremy: oh shoot yea i'll add screenshots rn <end> <start> Jeremy: give me like 5 min <end> <start> Winfrey: Okiee! No worries! There‚Äôs still time <end> <start> Jonathan: We don‚Äôt necessarily need the screenshots but we need the txt file output and the midi file <end> <start> Jonathan: In the submission <end> <start> Jeremy: i feel like it kinda reads like we need the music representation tho <end> <start> Jonathan: Ok thats fine <end> <start> Jeremy: "provide their abc notation and music representation from <url>" <end> <start> Jeremy: i just missed it the first time i read it oop <end> <start> Jonathan: But I guess the txt and midi files should be in the repo then? <end> <start> Winfrey: Yeah same here üòÖ <end> <start> Winfrey: Oh yeah this is the thing that I‚Äôm not sure <end> <start> Jeremy: i think they wanted it uploaded seperately? i vaguely remember reading about this somewhere <end> <start> Ester: @Jeremy Tow would you like to add a sentence to the Abstract to describe how the generated music sounds? <end> <start> Jeremy: okok <end> <start> Jeremy: ok i updated the abstract, also added in the pictures of the music <end> <start> Jonathan: Report submitted, I added u guys <end> <start> Jeremy: tyty <end> <start> Winfrey: So are we going with this? <end> <start> Jonathan: I guess so <end> <start> Winfrey: Ok I‚Äôll do that <end> <start> Ester: Do we need any help with the code submission? <end> <start> Winfrey: All good! Just submitted <end> <start> Jeremy: the pa just came out -- i've created a team called transformative <end> <start> Ester: Aight! <end> <start> Ester: PA4 report can use this copy of PA3 --- https://www.overleaf.com/6577473217tvkzqrprvbzs#1d8e2e <end> <start> Ester: still need to update the section headers and remove old content <end> <start> Ester: ^ if anyone wanna help with setting up PA4 report! If not, I can do it in some days <end> <start> Jonathan: I‚Äôll do more coding this time around, I‚Äôll have less capstone work <end> <start> Ester: You named the group CSE 151B PA4. <end> <start> Ester: I started on the code on branch ester1 <end> <start> Ester: Just fixed some formatting issues with the template <end> <start> Ester: Solved some minor bugs <end> <start> Winfrey: Are those on main or ester1? Which one should I pull <end> <start> Ester: Jeremy is also making some progress <end> <start> Ester: Main is the same as Ester 1 right now <end> <start> Winfrey: Ooh okkk <end> <start> Winfrey: Okie! Thanks <end> <start> Winfrey: I‚Äôll work on the programming part this Saturday, I‚Äôll check everyone‚Äôs progress by then before I start <end> <start> Ester: @Jeremy Tow would you like to push your code to your branch üòÆ I‚Äôm having a hard time making model.py work oop haha <end> <start> Jeremy: oh ok yea i‚Äôll push mine but it has low acc <end> <start> Jeremy: ok pushed <end> <start> Ester: update: the baseline training is working but the loss is still high (377) compared to the reference (39) <end> <start> Ester: the ester1 branch has working code <end> <start> Ester: run the command python main.py --embed-dim 768 --n-epochs 10 <end> <start> Ester: TA said: Results.txt is irrelevant Reference this result instead: Baseline(10 epochs): Loss = 192.47; Val Accuracy = 84.21; Test Accuracy = 83.49 <end> <start> Winfrey: Ooo is our loss 377 still considered too high compared to the reference? <end> <start> Ester: yeah :0  it'll need to be under 200 <end> <start> Jeremy: oh oop <end> <start> Winfrey: oooh okok! anywhere that u suspect is not doing the job properly? <end> <start> Ester: we can still test different optimizer and scheduler and other hyperparameter tuning <end> <start> Winfrey: Okie <end> <start> Ester: Actually the code on ester1 has some odd issue rn, but Jeremy will push his working code soon <end> <start> Jeremy: the code on the ester1 branch works fine for me lol <end> <start> Ester: What‚Äôs wrong with my terminal then üò≠ <end> <start> Ester: What command do you run on the terminal <end> <start> Jeremy: mb try a different server? <end> <start> Jeremy: i pushed the code btw <end> <start> Ester: BRUH changing the GPU worked üòî <end> <start> Ester: Quite possibly the most mysterious bug I‚Äôve seen <end> <start> Ester: Can someone else run ester1 multiple times? My results behave very differently the second time I run it <end> <start> Ester: cd cse151b251b-wi24-pa4-transformative python main.py --embed-dim 768 --n-epochs 50  ^^ try this <end> <start> Winfrey: Ah datahub and dsmlp not working for me at the moment. I‚Äôll have to wait and try again in 30minutes or so. <end> <start> Winfrey: @Ester Tsai @Jeremy Tow roughly how long does it take to run? <end> <start> Jeremy: < 1 min per epoch <end> <start> Ester: Feel free to change the number of epochs or add the argument for learning rate and try a higher learning rate <end> <start> Winfrey: ok thanks! it runs just fine but I have to interrupt it to go to a class now haha, I'll run it again tonight and see what it gives. <end> <start> Winfrey: And is this code implemented up till 3i? <end> <start> Winfrey: hmmm since yesterday night i've been having a problem where the terminal won't run at all lol, though it did run in the afternoon when i tested it. Right now, it's just stuck and interrupting does work as well, has anyone faced this problem before? it's the same for me both on datahub and using ssh <end> <start> Ester: Yes that happens sometimes <end> <start> Winfrey: interrupting does not work** <end> <start> Winfrey: ohhh okay <end> <start> Winfrey: interesting, first time for me, but good to know! <end> <start> Ester: Not sure what‚Äôs the solutionü•∫ <end> <start> Winfrey: it's okay!! I'll try another node and wait a bit <end> <start> Winfrey: thanks Ester! <end> <start> Winfrey: also confirmed this. Yesterday when I ran it for loss was 800+ at some epoch < 10, today I ran the same branch and loss is 2706 after 50 epochs <end> <start> Jeremy: uhhhhh wait let me run it a few times locally <end> <start> Jeremy: cuz i don‚Äôt think i have this issue <end> <start> Winfrey: ok I can try your branch as well <end> <start> Ester: TA said I can try adding <end> <start> Ester: gc.collect() torch.cuda.empty_cache() <end> <start> Winfrey: ooo okok <end> <start> Jeremy: i just ran it twice and i do not have this issue <end> <start> Ester: this doesn't work. I still get validation acc: 0.06443679291687161 for every epocj <end> <start> Jeremy: is it possible to use the captive machines? <end> <start> Jeremy: capstone <end> <start> Ester: I am using capstone GPU <end> <start> Ester: what command line prompt do you use? @Jeremy Tow <end> <start> Jeremy: i tried the one that you sent <end> <start> Ester: Dang I have no idea what's going on, I cloned Jeremy's code and it still doesn't work <end> <start> Ester: O wait it works when I don't specify learning rate (default is 1e-4 I believe) <end> <start> Ester: sheesh ok <end> <start> Winfrey: Also dropout 0.9 is quite high honestly <end> <start> Winfrey: I‚Äôm trying drop-rate 0.1 for 10 epochs <end> <start> Ester: so it does work, but I have to keep learning rate below 1.5e-4 (1.5e-4 does not work, but 1.1e-4 works, still testing more) <end> <start> Winfrey: Ooohh <end> <start> Winfrey: Validation accuracy is 85.7% and loss is 183 at epoch 6 for drop rate 0.1, everything else the same <end> <start> Winfrey: I think the culprit is the drop rate..? üòÇ <end> <start> Ester: !!!!!!!!!! <end> <start> Ester: OK <end> <start> Winfrey: Yeah ok test accuracy is 86.58% <end> <start> Ester: https://docs.google.com/document/d/1nJQMPYDRe2u6rF9DQKSnqh1L9nu2qlguvrrr8XS9Ofc/edit <end> <start> Winfrey: Thanks!! <end> <start> Ester: yuh please put your findings here <end> <start> Ester: updated ester1 -- updated default arguments to reflect the current best result <end> <start> Ester: I updated the print statement to be more clear too, so would you guys like to make a branch of ester1 and work on that? (ignore ester2) <end> <start> Winfrey: yes i'll merge with your branch in a bit, working on the custom model right now. Thank you Ester!! <end> <start> Winfrey: Implemented part 4 strategy 1 & 2 from the list of five strategies - I just went with the order of the list   feel free to check the code in my branch winfrey (merged pull from the latest update in ester1 branch)  also feel free to explore the other strategies - we will only need to report 2 out of the 5 strategies <end> <start> Winfrey: Results can be found in this doc here <end> <start> Ester: Are you all free to call at 3pm again this Friday to check-in on PA4? <end> <start> Winfrey: Yes! <end> <start> Ester: I'll try method 3 today <end> <start> Ester: just copied your updated code @Winfrey Kong <end> <start> Ester: bump! please react if you call on Friday at 3pm, and lmk if we need to find another time <end> <start> Ester: @Jonathan Cheung? <end> <start> Ester: Also I don't wanna see you guys lose points for not coding! I think it's worth arguing that you guys weren't able to code for PA3 because of unfixable cuDNN version incompatibility issue, and that you will make sure to code for PA4. This is what our prof wrote for PA3 feedback: "Hi folks - Based on your description of who did what, it sounds like Jeremy just did hyperparameter tuning, Jonathan only helped with analysis, and Samuel just helped write the report. You know that we expect everyone to code! Please argue with me in a regrade request as to why I should not give Samuel 50% of the points, Jonathan 70%, and Jeremy 80% of the points. In general, I highly recommend using pair or triple programming, trading of who is the driver to avoid this in the future." <end> <start> Jeremy: oh ummmm that‚Äôs kind awkward i kinda did the baseline too I just didn‚Äôt want to write that in my contributions cuz my work for that didn‚Äôt show up in the report <end> <start> Ester: you can argue for that! It's ok if it didn't show up in the report <end> <start> Jeremy: uhh shuld i directly send an email or should we create a doc or smth and then send everything all at once <end> <start> Ester: We just need to send one reply through Gradescope regrade request. Would you like to start a doc? <end> <start> Jeremy: ok yea i'll make it <end> <start> Winfrey: Oh yeaaaah definitely mention this, cause for PA1 both me and Ester worked on some parts that are the same and we said something like we both coded this part and we ended up taking xx‚Äôs version <end> <start> Jeremy: https://docs.google.com/document/d/1R1xlnWa6BZA66WxP5qsgCaxFv3OEXdITbvoWKMJkydE/edit?usp=sharing <end> <start> Jeremy: ok heres the link <end> <start> Jeremy: ok my bit is finished. i don't really know about the issue that you guys faced with cuDNN, so I couldn't really write about it <end> <start> Jonathan: I had the incompatibility issue so I couldn‚Äôt code. I don‚Äôt rlly have any other excuse bc I wrote what I did in the report. If that means I get 70% so be it, I am P/NP anyways <end> <start> Ester: btw we still need help with Part 5! Will anyone be working on that? I'm starting on it but can't guarantee I'll figure it out <end> <start> Ester: It's also helpful if anyone wants to try Stochastic Weight Averaging (SWA) and Frequent Evaluation for Part 4 <end> <start> Jonathan: I‚Äôll try <end> <start> Ester: Reinitializing the last layer resulted in slight improvement from baseline <end> <start> Ester: my code has been pushed to ester1 <end> <start> Ester: @Jeremy Tow @Jonathan Cheung @Samuel Chu feel free to  build on top of ester1; it has Jeremy's, Winfrey's, and my most updated code <end> <start> Winfrey: I like how we are stacking on top one another‚Äôs üòÇüòÇ <end> <start> Winfrey: Hello hello, to plan our tasks and time for the rest of this week, is anyone planning to work on or currently working on part 4 or part 5? <end> <start> Jeremy: i‚Äôll work on part 5 <end> <start> Jeremy: oh btw @Samuel Chu do you have anything to add to the regrade request? if not should I submit it? <end> <start> Samuel: i was going to try to do part 4 or 5 also <end> <start> Samuel: okay i‚Äôll add to it <end> <start> Ester: I'm updating ester1 rn to better test different custom fine tuning <end> <start> Ester: ^ done pushing to ester1 <end> <start> Ester: @Winfrey Kong would you like to try dropout 0.15 instead of 0.1? it seemed to perform better for me <end> <start> Winfrey: Sure <end> <start> Ester: btw just updated ester1 again! Now it's a lot easier to implement different custom models in models.py and use class inheritance to combine methods <end> <start> Ester: For now I'm gonna test everything with learning rate 1e-5 and dropout 0.15 <end> <start> Ester: All results are recorded here btw! https://docs.google.com/document/d/1nJQMPYDRe2u6rF9DQKSnqh1L9nu2qlguvrrr8XS9Ofc/edit <end> <start> Winfrey: Kong pinned a message. <end> <start> Ester: Any progress on part 5? <end> <start> Jeremy: nothing significant yet, gonna work on it later tonight <end> <start> Ester: Also would anyone like to set up the report sections according to the PA instruction?     https://piazza.com/class_profile/get_resource/lr49jt48q953s2/lsw7akg438g2v https://www.overleaf.com/6577473217tvkzqrprvbzs#1d8e2e <end> <start> Winfrey: I will do that <end> <start> Winfrey: I‚Äôll also work on what is left for Part 4 this Sunday. @Jonathan Cheung @Samuel Chu lmk if you are already working on any of Part 4 (or Part 5) so I can plan my time accordingly.   Also I‚Äôll need help with getting started on the report, if any of you would like to work together with me, I‚Äôd really appreciate that!! <end> <start> Jonathan: I haven‚Äôt rlly looked but I can do part 5 <end> <start> Ester: We‚Äôre pretty good on part 4 since we‚Äôve done methods 1-3. Feel free to try methods 4-5 but we should aim to get part 5 done first! <end> <start> Winfrey: Yupp agreed!! <end> <start> Ester: Anyone going to OH tomorrow? <end> <start> Winfrey: Nope I won‚Äôt be <end> <start> Ester: I have a functional part 5 <end> <start> Ester: there are 2 parts to the supcon_train: the first training loop uses SupCon loss to train the model to output features that group similar data points together; the second training loop uses cross entropy loss to train the classifier to output predictions based on "features" input <end> <start> Ester: ester1 branch has the newest updates <end> <start> Jeremy: oh oop im still working on it rn <end> <start> Jeremy: oh btw did we submit the regrade request yet and if not shuld i do it <end> <start> Ester: feel free to try on your own or improve on mine! <end> <start> Ester: I can check <end> <start> Jeremy: tyty <end> <start> Ester: not submitted yet <end> <start> Ester: Can someone run it and see what the test accuracy is? <end> <start> Ester: It‚Äôs only 50% if I set n-epochs to 10 <end> <start> Ester: So we can try 20 <end> <start> Jonathan: ill run it <end> <start> Jonathan: rip no nodes avialble rn <end> <start> Jonathan: nvm its working now <end> <start> Jonathan: just finsihed running with 20 epochs, test acc is 0.5047 <end> <start> Ester: lol so more epochs does not help <end> <start> Ester: I've implemented util.plot <end> <start> Ester: YOOOOOOOOOOOOOOOO <end> <start> Ester: part 5 worked <end> <start> Ester: I think! <end> <start> Winfrey: Yooooooooooo <end> <start> Winfrey: Wowwwww <end> <start> Jeremy: ur actually amazing <end> <start> Ester: the loss has been updated to reflect mean loss, not total <end> <start> Ester: I just needed to make the learning rate much higher for the classifier <end> <start> Ester: high key it's scary when things work <end> <start> Ester: better sanity check <end> <start> Jeremy: when i finally figure out how to do it individually i‚Äôll also check ig <end> <start> Jeremy: but it actually putting in so much work it‚Äôs crazy tysm <end> <start> Ester: @Jonathan Cheung @Winfrey Kong would you guys be down to set up the report by tonight? https://www.overleaf.com/6577473217tvkzqrprvbzs#1d8e2e <end> <start> Ester: or by tomorrow before 3pm <end> <start> Jonathan: Yeah I‚Äôll do so <end> <start> Ester: ^ to get 88.23% test accuracy <end> <start> Ester: Imma run the models overnight to get these plots <end> <start> Ester: I haven't tested SimCLR yet <end> <start> Ester: ^ if anyone would like to test it <end> <start> Winfrey: Thank you! <end> <start> Jeremy: i'll run it, i need a break anyways <end> <start> Ester: You can get the code from ester1! Lmk if it works ü´£ <end> <start> Ester: Made fixes to the plots and corresponding stuff <end> <start> Ester: @Jeremy Tow how‚Äôs SimCLR? <end> <start> Jonathan: I‚Äôll run it <end> <start> Ester: accuracy is pretty low for SimCLR, might need some tuning <end> <start> Ester: Could you try different parameters? <end> <start> Jonathan: Yeah <end> <start> Ester: Has anyone read the SimCLR slides? <end> <start> Jeremy: i‚Äôve read the paper <end> <start> Jeremy: i‚Äôm in class rn but i‚Äôll update after i fj ish <end> <start> Ester: Btw If you run out of storage, you can comment out the part of the code in supcon_train in main.py that saves the model weight! <end> <start> Ester: It gives you the option to only train the classifier using a pre-trained contrastive model with this parameter   --contrastive-model-path SupCon_ep10_dropout0.4_lr0.0001_temp0.07_baseTemp0.07.pth <end> <start> Ester: Replacing the .pth portion with whatever the model weight name is in the model/ folder <end> <start> Ester: Reminder we are calling at 3! <end> <start> Ester: https://ucsd.zoom.us/j/97890026804 <end> <start> Winfrey: I‚Äôll join in one minute, finding a quiet space <end> <start> Jeremy: heres the run that I did last night <end> <start> Ester: https://docs.google.com/document/d/1nJQMPYDRe2u6rF9DQKSnqh1L9nu2qlguvrrr8XS9Ofc/edit <end> <start> Winfrey: https://huggingface.co/tasks/zero-shot-classification <end> <start> Winfrey: ^ i was looking at the inference section <end> <start> Ester: in fact 50 is the most common label <end> <start> Winfrey: üëÄ <end> <start> Ester: Question is, how does BERT know which label is the most popular : 0 <end> <start> Winfrey: Yeah looks like answering this = answer to that question <end> <start> Winfrey: Or maybe how does the classifier know which label is the most popular ? <end> <start> Jeremy: oh right i forgot to mention this but im prob going to submit the regrade request later today <end> <start> Samuel: label 50 is calendar set <end> <start> Samuel: no idea how it knows tho <end> <start> Samuel: are you that you aren‚Äôt training it at all <end> <start> Ester: I just added train loss to plot names! Please git pull ester1 if you plan to use that code <end> <start> Ester: just made another push to use the best model (best val accuracy) instead of final model <end> <start> Winfrey: Confirmed with TA, kinda what we went over just now. So I guess we just have to figure out why test accuracy is roughly the percentage of the dominant class or is it just coincidence  ‚ÄúBefore fine-tuning means: we use BERT + linear classifier to get our target predictions without any training.‚Äù <end> <start> Winfrey: So essentially it goes down to what the linear classifier is predicting? <end> <start> Ester: All the plots for report are on GitHub in the plots/good/ folder <end> <start> Ester: Except for SimCLR <end> <start> Ester: lowering temperature and increasing input-classifier-dim seems to increase test accuracy for SimCLR! <end> <start> Jonathan: How did you get rid of the cuda memory error, I‚Äôm been getting ~50% by playing with batch sizes <end> <start> Ester: You‚Äôll need to set the batch size to something less than 1000 <end> <start> Ester: 512 still works <end> <start> Ester: Bigger batch size will cause cuda out of memory error <end> <start> Ester: If you use node 30 on DSMLP you get a GPU with more GB of memory <end> <start> Ester: oo highest I got so far is 67.48% <end> <start> Winfrey: looking at SimCLR now <end> <start> Winfrey: good call on using large batch size @Ester Tsai!! I read Lilian Weng's blog that SimCLR does require large batch size to perform well. <end> <start> Winfrey: checked the implementation of SimCLR, it looks all good to me (thanks Ester!), I'm reading papers on the effect of some hyperparameters on it. <end> <start> Winfrey: if we haven't already tried, we could try lower learning rate for classifier (1e-4) <end> <start> Winfrey: SimCSE is using dropout rate of 0.1, and from the doc I see that Ester has tried that <end> <start> Ester: side note! rn we use the cosine annealing scheduler for the classifier so the learning rate will decrease over the epochs <end> <start> Ester: we should still try different starting learning rates tho! <end> <start> Ester: or even different schedulers <end> <start> Winfrey: okie! <end> <start> Winfrey: @Jeremy Tow also.. I kinda suspect that there's actually only 2 published research papers that use Amazon Massive Intent - maybe that's why the instruction explicitly states that we get full credits for related work as long as we have 2 papers that use this dataset lol  I could be wrong though, just couldn't find any other papers. <end> <start> Winfrey: paper 1: https://arxiv.org/pdf/2204.08582.pdf  paper 2: https://arxiv.org/pdf/2310.16609.pdf (their model on HF https://huggingface.co/cartesinus/xlm-r-base-amazon-massive-intent) <end> <start> Ester: I'm trying SGD optimizer for the contrastive training loop <end> <start> Winfrey: @Ester Tsai just confirming, we are going with custom 1&3 right? <end> <start> Ester: yeah let's do that if you guys are down! <end> <start> Winfrey: yeah sounds good to me <end> <start> Ester: @Jeremy Tow@Jonathan Cheung@Samuel Chu How's progress? <end> <start> Winfrey: @Ester Tsai do you also get very low contrastive loss? like 0.0 <end> <start> Ester: yes <end> <start> Winfrey: I'm thinking if it is the classifier that's not learning <end> <start> Winfrey: i think i figured out SimCLR <end> <start> Winfrey: will get back to yall in 20 mins <end> <start> Jonathan: Removing the scheduler yields 61% without learning rate modifications <end> <start> Jonathan: The batch size doesn‚Äôt seem to have significant difference compared to 256, though I‚Äôm not on gpu 30 and other params are TBD <end> <start> Winfrey: for SimCLR, it's our model architecture. there are two things we might have missed, i am still checking:  1. we need to drop the projection head when passing to the classifier. we still train supconmodel with the projection head, it is only when training the classifier, we want the hidden representations instead of the projection head output  2. we need to apply dropout two times for unsupervised SimCLR. I am still looking at the paper for details of implementation <end> <start> Winfrey: https://arxiv.org/pdf/2104.08821.pdf <end> <start> Winfrey: my post on piazza: https://piazza.com/class/lr49jt48q953s2/post/634 <end> <start> Winfrey: ok so we took care of item2. I will work on item1 <end> <start> Ester: I see! That makes so much sense! <end> <start> Jonathan: I believe I‚Äôve successfully done this and got 0.692 <end> <start> Jonathan: Don‚Äôt know if Params matter as much though training acc becomes much higher at 0.78 <end> <start> Jonathan: By making forward pass return l2 and the final thing, and taking the l2 into the classifier on the eval step <end> <start> Jonathan: I have been experimenting on flipping the normalization and linear head in final_output but don‚Äôt know if it‚Äôs a fluke <end> <start> Winfrey: Yup yup this sounds right <end> <start> Jonathan: I‚Äôm running rn after moving the scheduler update thing into the epoch for loop rather than batch <end> <start> Winfrey: Yup this too <end> <start> Winfrey: Also try removing the cross entropy loss reduction = sum <end> <start> Winfrey: Just use the default <end> <start> Jonathan: Why does the loss sometimes become nan <end> <start> Jonathan: After many epochs of 0 it becomes nan and it breaks <end> <start> Winfrey: classifier or supcon? <end> <start> Jonathan: I mean the mean train loss <end> <start> Winfrey: if you are referring to the mean train loss of supcon (the first training loop), it always reaches 0.0 within 10 epochs for me <end> <start> Winfrey: so i just set it at 10 epochs for contrastive-n-epochs <end> <start> Winfrey: also, might want to add a new argument to this <end> <start> Ester: It becomes man for em sometimes too, especially when temperature is lower than 0.01 <end> <start> Winfrey: because if it is taking classifier input dim, it'll always be 768, and the linear is doing 768 -> 768, which is not really meaningful <end> <start> Winfrey: and classifier input dim has to be 768, since it is taking the encoder's embeddings when we are doing SimCLR <end> <start> Ester: Yep that‚Äôs right <end> <start> Winfrey: was able to get 71% val acc, and 88% train acc by epoch 7 of training the classifier, just fixing some minor issues on my end right now. I will run a few more experiments and let yall know how it goes. <end> <start> Jonathan: Messed up a line and my test acc became 0.02 üíÄ <end> <start> Winfrey: hahaha high five, been there, done that, i was debugging for like 2 hours <end> <start> Ester: that's great! <end> <start> Jonathan: Were u able to move the scheduler step out of the batch loop? <end> <start> Jonathan: Seems to be breaking my code <end> <start> Winfrey: yup <end> <start> Winfrey: lemme push my code to winfrey and maybe you can cross check from there <end> <start> Winfrey: ok my branch is fully updated <end> <start> Winfrey: i'm mostly testing 2 hyperparameters now 1. supcon-linear-head-dim 2. hidden-dim (of the classifier, because we have been using the default 10, so its going 768 -> 10 -> 60) <end> <start> Ester: OHH REALLY <end> <start> Ester: I thought hidden dim isn‚Äôt used for some reason <end> <start> Winfrey: It‚Äôs a lot of args going on üòÇ <end> <start> Ester: O DANG you‚Äôre right <end> <start> Ester: It‚Äôs being used by Classifier class <end> <start> Ester: OOPS <end> <start> Winfrey: Yeah no worries, I only realized that very much later, the 71% just now is with hidden dim 128 (for Classifier), and sup con linear head dim 128 (for SupConModel) <end> <start> Ester: the linear head dim can go pretty high, like 3000 <end> <start> Winfrey: True true! <end> <start> Ester: btw I forgot to share earlier! but if you want the DSMLP GPU to have a high time limit (24 hours instead of 6 hours), you can run these commands in the terminal before your GPU launch scrupt <end> <start> Ester: export K8S_PRIORITY_CLASS_NAME=normal export K8S_TIMEOUT_SECONDS=86400  export K8S_BYPASS_TIMEOUT_LIMIT=yes <end> <start> Winfrey: Oh my goodness this is so very much needed <end> <start> Winfrey: Thank you <end> <start> Winfrey: added a new table just for SimCLR in the results google doc <end> <start> Jonathan: WAIT <end> <start> Jonathan: WAIT <end> <start> Winfrey: Yes sir <end> <start> Jonathan: VAL ACC 0.83 on 3 epochs <end> <start> Winfrey: Niceeeee <end> <start> Ester: sheesh????????? <end> <start> Winfrey: Lesgoooo <end> <start> Jonathan: The train acc is getting to 99% <end> <start> Winfrey: Goodnight everyone <end> <start> Winfrey: HAHAHAHAH <end> <start> Winfrey: What‚Äôs the magic parameter <end> <start> Jonathan: Let me finish the training <end> <start> Ester: yuh please send the command line <end> <start> Winfrey: Okieeeee <end> <start> Jonathan: It‚Äôs in the process but should take less than the usual 40 <end> <start> Ester: wanna send it rn haha I'll run it along with my other string of commands <end> <start> Winfrey: Oh and push ur code we can just use urs <end> <start> Jonathan: if epcosh is greater than 7 the loss becomes nan <end> <start> Winfrey: Is ur classifier-input-dim actually the classifier‚Äôs input dim? <end> <start> Jonathan: oh yeah ill make a branch bc ive been workignon a copy of esters <end> <start> Winfrey: Yeaaah okkk <end> <start> Winfrey: Thanks Jonathan!! <end> <start> Jonathan: i modifed this line"classifier = Classifier(args, args.embed_dim, target_size).to(device)" <end> <start> Jonathan: shoudl be  line ~298 in main.py <end> <start> Jonathan: bc i was gettign errors from reshaping <end> <start> Jonathan: though idk if its sketch <end> <start> Ester: what did you modify it to? <end> <start> Ester: args.embed_dim will have to be 768 <end> <start> Jonathan: it was modifed to that, it was args.classifier_input_dim <end> <start> Jonathan: caused an error bc 256x3500 can do matmul wiht 768x10 <end> <start> Jonathan: or 128 in this case <end> <start> Winfrey: Niceeee we can take a look at your code and see if it‚Äôs just naming differences which we can always adjust later <end> <start> Ester: btw for CrossEntropyLoss(reduction='sum'), it makes the cross entropy loss return the sum instead of the mean for each batch, so we can divide by total number of data points and get the mean over the whole set <end> <start> Ester: if we removed the reduction='sum', it'll be hard to calculate loss consistently <end> <start> Winfrey: Also, very good call on this Ester, val acc is already above 80% at epoch 3 with 1200 linear head dim <end> <start> Winfrey: OHHHH Okok we should put it back then, Soz didn‚Äôt think that far <end> <start> Ester: haha I tried 10000 once and might've gotten CUDA out of memeory <end> <start> Winfrey: Pushing the limits we like <end> <start> Ester: OOOO I got good results similar to jcheung's <end> <start> Winfrey: Yooooooooooo <end> <start> Ester: the epochs can be lower and probably still perform the same <end> <start> Ester: 82.92% <end> <start> Winfrey: Niceeeeee wow I‚Äôm so glad we worked this out together üòçüòçüòç <end> <start> Jonathan: i made my branch but it looks like ester branch from a week ago, im a brnach noob does anyone know how to update it <end> <start> Ester: plot looks reasonable <end> <start> Winfrey: Create a pull request from Ester to ur branch <end> <start> Ester: YUH thanks to your important fixes XD <end> <start> Winfrey: I find it easier to do this on GitHub than command line <end> <start> Winfrey: 1. Pull request from Ester to ur branch 2. Then only push ur code to ur branch <end> <start> Jonathan: oh wait im so dumb <end> <start> Jonathan: im wokring on datahub lol <end> <start> Jonathan: not the actual repo on my computer <end> <start> Winfrey: Well, there‚Äôs also brute force, download the py files and upload it, almost guaranteed to work always ü§£ when there‚Äôs too many merge conflicts I just brute force hahaha <end> <start> Ester: o wait ester 1 is not updated <end> <start> Ester: let me do that rn <end> <start> Jonathan: ok i pshed to my branch <end> <start> Jonathan: the comments and stuff r still there so its super messy but u hsould be able to see the changes <end> <start> Jonathan: mainly on the forward pass and the respective changes from 2 outputs in the eval and clr training loops <end> <start> Ester: I had merge conflict so I couldn't properly push my code lolol I ended up copy pasting my changes into ester1 <end> <start> Ester: I'm rerunning all the other models after the code fix, but I'm down to just use what we already have on the report to save time changing everything out <end> <start> Ester: I put it in the figures folder for Overleaf but feel free to replace it if something better comes up <end> <start> Ester: 82.92% test acc <end> <start> Ester: New result for supcon loss: 88.9% at epoch 3 <end> <start> Winfrey: Aaaaaa <end> <start> Winfrey: Noiceeee <end> <start> Ester: 83.15% SimCLR <end> <start> Jonathan: Are we confirmed using that for the report? <end> <start> Jonathan: I can fill in the values in the chart and in the abstract then <end> <start> Ester: I have a better plot possibly <end> <start> Ester: Let me update it on overleaf rn <end> <start> Ester: After fixing our code, the baseline is mega good <end> <start> Ester: 89% <end> <start> Ester: No other model gets better than baseline <end> <start> Ester: Should we keep our old set of plots to save time or hyperparameter tune all the models until they are optimized? <end> <start> Jonathan: I‚Äôm fine with keeping out old set <end> <start> Ester: The Discussion section still has many blanks. Please help fill it out! I might go to OH at 5pm to ask questions <end> <start> Ester: I've at least updated the SupCon and SimCLR plots, but not yet the other ones. I'm also down to keep the other ones the same since we've already written a lot about them. But I also have the new plots after the code fix available if we want to swap the old ones out. <end> <start> Winfrey: yup, i will fill out my parts today. <end> <start> Winfrey: yeah, i'm down with either. <end> <start> Winfrey: is the acc for the fine tuned models very different from the table we have right now? <end> <start> Ester: all are around 88% <end> <start> Ester: not that different <end> <start> Winfrey: i see okay <end> <start> Winfrey: well.. at least for my part of the discussion, it is easier to discuss that adding fine-tuning strategies improves the model <end> <start> Winfrey: but i can do more research <end> <start> Winfrey: if we want, we can embrace the research mindset by reporting the latest results <end> <start> Ester: TRUE <end> <start> Winfrey: yeah, i'm kind of leaning towards reporting our final and most consistent results <end> <start> Winfrey: do you need help with running any more or you have everything we need already? <end> <start> Ester: I still need help with hyperparameter tuning <end> <start> Ester: for custom 3 and custom1and3 <end> <start> Winfrey: just saw that you took SimCLR on the report! thank you thank you <end> <start> Ester: done with baseline and custom1 <end> <start> Winfrey: okkk i will do that tonight, will build off what you have in the results doc <end> <start> Ester: These are the new plots that we can use, minus custom3 and custom1and3 <end> <start> Ester: I'll put them on Overleaf <end> <start> Winfrey: oooh so custom1 itself is slightly tiny bit better than baseline <end> <start> Ester: yeye just got the newest best result from hyperparameter tuning <end> <start> Ester: ^these are the current best custom1 and custom1and3 <end> <start> Ester: to summarize: I've updated the corresponding report parts for baseline, custom1, and SimCLR. Still waiting on some more SupCon to run for better consistency. Need help on hyperparameter tuning and updating the report for custom3 and custom1and3 <end> <start> Jonathan: Do we hv numbers for technique 2 and the combined ones or is it being rerun <end> <start> Ester: These are the current best stats but it is being rerun <end> <start> Jonathan: Also did using the losses rather than the 2 techniques trading faster or was there no significant difference? <end> <start> Ester: Wdym by using the losses? <end> <start> Jonathan: Clr and supcon <end> <start> Jonathan: Like do those model train faster in any significant way? <end> <start> Ester: I didn‚Äôt keep track of that hmm <end> <start> Ester: Feel free to track it <end> <start> Ester: Ester1 should be updated <end> <start> Jonathan: For this block in the result section: "For the second technique, we initialize the weights of the last layer in BERT before fine-tuning it.95 Both training and validation accuracies increase very rapidly for the first 4 epochs. The training96 accuracy continues to improve, but the validation accuracy plateaus at around 86%, showing signs of97 overfitting. The final test accuracy is 86.28%. The training stops early at epoch 17 after the validation98 accuracy decreases for 3 epochs in a row. The best model based on the highest validation accuracy99 occurs at epoch 14.100 NEEEEEEEEEEEEED UPDATE!!!!!!!!!!!!!!!!!!!! " do we still need this or is it jsut misplaced section?? <end> <start> Jonathan: like do we need to commnet on each graph or should this be put in the technique 2 section <end> <start> Ester: We need to comment on each plot right <end> <start> Winfrey: hmmmm.. the exact wording from the doc is summarize the results, but we can always play safe and mention it. <end> <start> Winfrey: we are meeting at 7pm this Wednesday for final project, right? <end> <start> Ester: Yes <end> <start> Winfrey: @Ester Tsai if ester1 branch is the most updated one, custom_train in main.py we gotta move the model.scheduler.step() outside of the batch loop <end> <start> Winfrey: typo from the starter code that got carried forward oopss <end> <start> Winfrey: I moved the scheduler step out to the epoch loop, and the best val acc is above this here at epoch 5 <end> <start> Ester: Ohhhhhh <end> <start> Ester: I fixed it once but it didn‚Äôt save, so that might be why I missed it when I fixed a second time <end> <start> Ester: I got good supcon plot <end> <start> Winfrey: Ooohh I seeee okkk thanks! <end> <start> Ester: task=custom1and3 testAcc=0.8907 bestValAcc=0.8942 bestTrainAcc=0.9931 mean_loss=0.0194 ep=20 batch_s=16 drop=0.2 LR=5e-06 hid=128 <end> <start> Ester: custom1and3 just slightly worse than baseline <end> <start> Winfrey: Is the scheduler step in the epoch loop when u ran them? Just curious if u have changed it locally <end> <start> Ester: oh right! <end> <start> Ester: need to rerun <end> <start> Winfrey: üò¨üò¨ I can help run a chunk when I get home in like 45 minutes <end> <start> Winfrey: Thanks for running so many of them <end> <start> Winfrey: üò≠üôåüèº <end> <start> Ester: the 5pm TA  is very confused <end> <start> Ester: just quit his OH lol <end> <start> Winfrey: I went to his before! and I remember the session I went wasn‚Äôt very helpful too <end> <start> Jeremy: oh shoot sorry i've been afk for most of today. i jst added a bit to the related works and i can help do runs as well <end> <start> Jeremy: which exact ones need reruns? <end> <start> Ester: all the custom ones <end> <start> Ester: I updated ester1 to fix the scheduler.step <end> <start> Jeremy: these two? <end> <start> Ester: yes, and the combined <end> <start> Jeremy: okok i will run those <end> <start> Ester: custom1, custom3, and custom1and3 <end> <start> Winfrey: Ester has a chunk of command lines written in the results doc, you can get some from there and modify as you would like to <end> <start> Ester: task=custom1and3 testAcc=0.8944 bestValAcc=0.8952 bestTrainAcc=0.9997 mean_loss=0.0036 ep=20 batch_s=16 drop=0.2 LR=5e-06 hid=1000 <end> <start> Ester: wow lol that little bug fix solved many things <end> <start> Winfrey: Niceeeee <end> <start> Winfrey: i see your log of code that you will run at 520pm, is there any block that is not in the queue now? <end> <start> Ester: SupCon loss is currently worse than the custom ones <end> <start> Ester: I also haven't gotten to run any custom1 and custom3 commands <end> <start> Jeremy: i'll run the custom3 commands <end> <start> Winfrey: ok ill do custom1 <end> <start> Ester: yuh yuh I'm keeping hidden-dim=1000 for all of them <end> <start> Ester: mostly play around with learning rate and drop rate, but 0.2 seems to be the best? <end> <start> Ester: 0.2 drop rate* <end> <start> Winfrey: okk! <end> <start> Ester: task=custom1 testAcc=0.8914 bestValAcc=0.8957 bestTrainAcc=0.9997 mean_loss=0.0022 ep=19 batch_s=16 drop=0.2 LR=7e-06 hid=1000 <end> <start> Ester: ^ just got this! lmk if you get somehting higher : D <end> <start> Ester: I got above 89% for all custom models <end> <start> Ester: lmk if anything better comes up! Or I can just put these plots on Overleaf <end> <start> Winfrey: Nice nice mine is still running and ntg is higher so far <end> <start> Jeremy: ^ yea same <end> <start> Winfrey: custom1 is on its last one, i am good with going with what you have there. do we still need to run supcon? <end> <start> Winfrey: ^ I'm assuming you meant SimCLR <end> <start> Ester: The best is 89.14%, while custom1and3 is 89.51% <end> <start> Ester: I‚Äôm ok with calling it good enough haja <end> <start> Winfrey: yes agreed <end> <start> Ester: Actually I meant SupCon! <end> <start> Winfrey: oooo <end> <start> Ester: SimCLR is 83.15 <end> <start> Ester: And it‚Äôs alright since it‚Äôs above 80% <end> <start> Winfrey: yeah <end> <start> Ester: All the plots had been updated! <end> <start> Winfrey: ok i will do supcon now <end> <start> Ester: Do you mean running more of supcon or writing about it in report? <end> <start> Winfrey: oh wait actually <end> <start> Winfrey: none of the supcon uses the custom techniques, could we say that if the discussion asks us to discuss the results? <end> <start> Jonathan: I‚Äôm updating the CLR chart and doing the description of the plot - do we have updated params and values for that? <end> <start> Jonathan: Also abstract and intro r up to date <end> <start> Ester: The table and plot are updated! <end> <start> Jonathan: Oh wait I misread the graph lol <end> <start> Ester: Does anyone know what SimCLR stands for lol <end> <start> Winfrey: A Simple framework for learning Contrastive Learning of Visual Representations <end> <start> Winfrey: literally HAHAH <end> <start> Ester: For explaining the plots, remember to \ref the figure! <end> <start> Winfrey: i'm pretty much done with my parts on the report. lmk if any of you need me on any parts, if not I'll wait a bit and see where else I can add to. <end> <start> Winfrey: updated github main readme <end> <start> Jeremy: the best i got was all 0.88 so yea <end> <start> Jeremy: ok I edited the introduction + expanded on the discussion section and finished the related works section <end> <start> Ester: Wow our Related Works section is stacked <end> <start> Ester: love that <end> <start> Winfrey: would you like to merge your branch to main @Ester Tsai? <end> <start> Ester: ok! <end> <start> Ester: I submitted code, but it'd be helpful if someone git clones the main branch to check if everything works smoothly <end> <start> Ester: haha I dropped in a place for most Piazza posts <end> <start> Samuel: dang both y‚Äôall are on the leaderboard üòÇ <end> <start> Ester: 70 contributions is crazy <end> <start> Ester: 8 per week <end> <start> Ester: I asked this question on Piazza: <end> <start> Ester: @Samuel Chu if the TA answers it, would you like to add whatever we are missing to the report? <end> <start> Ester: I also asked: <end> <start> Jonathan: I have update Q10 with a more comprehensive answer with respect to simclr and supcon and added a citation in introduction - after I finish if there‚Äôs nothing else I can submit <end> <start> Ester: I don‚Äôt get it lol, our un-tuned model is not predicting randomly <end> <start> Jeremy: mb our model is plainly just better <end> <start> Jeremy: built different <end> <start> Ester: can you all check on your end what your test accuracy is before training? <end> <start> Ester: @Winfrey Kong @Jeremy Tow @Jonathan Cheung @Samuel Chu ? <end> <start> Ester: send in the chat asap haha so we can see if my higher number is just due to random chance <end> <start> Ester: maybe try a different seed too <end> <start> Ester: What are the most common predictions? Wanna check with a print statement in run_eval? <end> <start> Jeremy: seed of 2 <end> <start> Jeremy: oh okok <end> <start> Jonathan: Jeremy what‚Äôs the line you‚Äôre running <end> <start> Ester: Doesn‚Äôt matter, just run baseline ü§ù <end> <start> Jeremy: ok wait i got a 1 percent lol <end> <start> Ester: What matters is that run_eval comes before baseline_train <end> <start> Jeremy: it might have been random chance <end> <start> Jeremy: we can prob do some statistical analysis to see how probable that is? <end> <start> Ester: Wow is mine just too cracked of a seed, somehow the two most popular labels happen to be guessed over and over <end> <start> Jonathan: I think my code broke or something my baseline has gets acc of 0.8662 <end> <start> Ester: How about Before you run training? <end> <start> Jonathan: Might have switched up a paean to use a diff model lol <end> <start> Ester: Oh lol ok we can go with Jonathan‚Äôs number <end> <start> Ester: For the report <end> <start> Ester: Could someone update the table and the Discussion Q2? <end> <start> Ester: This is so goofy <end> <start> Jonathan: I‚Äôll rewrite Q2 to say they match <end> <start> Jonathan: Wait <end> <start> Jonathan: Not exactly but same order of Magnitude?? I guess <end> <start> Jonathan: 1/60 is 1.67% while out test acc is about 0.98% <end> <start> Jonathan: So close enough?? <end> <start> Jeremy: im running stats let me give u numbers in a sec <end> <start> Jeremy: im going to run it 100 times and get means + stddevs <end> <start> Jeremy: our seed was actually just built different <end> <start> Jeremy: two percent chance <end> <start> Winfrey: üòÇüòÇüòÇüòÇ <end> <start> Jeremy: @Jonathan Cheung you can put these numbers into the report <end> <start> Jeremy: over 100 different seeds <end> <start> Jonathan: I‚Äôll out that in Q2 <end> <start> Jonathan: The chart I‚Äôll put the mean number in <end> <start> Jonathan: Ok updated <end> <start> Jonathan: Ready for submit? <end> <start> Jeremy: for my parts yea <end> <start> Jonathan: I‚Äôm gonna submit for now, if there‚Äôs any more changes lmk <end> <start> Ester: This is super useful info! <end> <start> Jeremy: @Winfrey Kong@Ester Tsai for the photo focal length idea we talked about earlier in person: 24-30 mm: 3k 30-40 mm: 6k 40-55 mm: 2k 55-70 mm: 6k > 70 mm: 400  This is just the number of photos taken with my current camera so I have a lot more but they're harder to find stats on rn. I think it might be better to pull photos from the internet so there is more variety, and maybe supplement that data with mine, if we do go through with this idea  link to github repo: https://github.com/nandometzger/MLFocalLengths <end> <start> Ester: oo Jeremy's idea is super cool! Here is another option that seems feasible: train an LSTM to generate text that resembles how we talk in this Messenger chat <end> <start> Ester: It's pretty easy to get Messenger chat data from Facebook <end> <start> Jonathan: Are you able to download a specific group chat with the date range? Or does it download everything in the same interval only? <end> <start> Samuel: we could use gpt model too maybe <end> <start> Ester: I can download all of my chat data for a specific time range. Every chat is a different file <end> <start> Jonathan: Yeah just fogured that out it‚Äôs really cool <end> <start> Winfrey: Article that we can refer to for this task: https://towardsdatascience.com/creating-a-smart-chat-bot-that-talks-like-you-79bb700b288f <end> <start> Ester: typo here lol <end> <start> Ester: I can fix and resubmit <end> <start> Jonathan: Lol thanks <end> <start> Jeremy: oh thats a good idea. i think the main thing we would have to figure out would be how to make it different tho <end> <start> Winfrey: Wdym by different? <end> <start> Winfrey: Also, just saying that, we are not set set on the idea so feel free to explore other ideas and we can go over all ideas together tomorrow <end> <start> Jeremy: i feel like it'd be pretty easy to find code for this idea, so we'd need to apply it to a new dataset or a different problem. idk if just using a different set of text messages for training would be sufficient to get past the tas lol <end> <start> Winfrey: Yeah honestly cleaning our chat data is going to take up quite a chunk <end> <start> Winfrey: But yeah one thing for sure is that there‚Äôs a lot of resources available out there. Also could take a look at how we can make changes to model architecture <end> <start> Winfrey: if we build our model sort of from scratch (but with some reference out there), this will give us a lot more flexibility <end> <start> Winfrey: https://towardsdatascience.com/build-a-language-model-on-your-whatsapp-chats-31264a9ced90  ^ example of building GPT model architecture from scratch -ish? it's a decoder only architecture <end> <start> Samuel: yeah i was just thinking we could finetune a gpt model like this https://huggingface.co/openai-community/gpt2 <end> <start> Samuel: oh do we need to do the training? or can we just finetune <end> <start> Winfrey: the only thing that I am not sure about just plugging gpt is how much flexibility we have in terms of actually training it. Most of the examples that I‚Äôve seen is just calling the model to generate, as in there‚Äôs no trainer loop etc. <end> <start> Winfrey: For plugging a pre trained generative model, fine tuning looks like to me is finding the right sequence length, setting the right temperature, trying different pretrained models, top_p, top_k etc  Which we should probably have it as some sort of comparison for evaluation, but if we are only fine tuning, I‚Äôm not sure if that can count as our final project. I can confirm with TA tmr though <end> <start> Samuel: ahh i see <end> <start> Samuel: okay <end> <start> Winfrey: Ooh actually, we can train GPT2! The one u shared <end> <start> Winfrey: Kind of like how we train our baseline bert for this round. <end> <start> Samuel: cool ok <end> <start> Winfrey: just added final project idea notes to our team doc <end> <start> Winfrey: https://ucsd.zoom.us/j/98448355767 <end> <start> Ester: https://docs.google.com/document/d/1nJQMPYDRe2u6rF9DQKSnqh1L9nu2qlguvrrr8XS9Ofc/edit#heading=h.2loz3wx6ar1q <end> <start> Jeremy: https://huggingface.co/docs/transformers/en/model_doc/mixtral <end> <start> Ester: ah here is how to get the emoji <end> <start> Winfrey: So cute <end> <start> Ester: actually these are in reverse order <end> <start> Ester: with very little training <end> <start> Winfrey: Wow this is promising <end> <start> Ester: 1 epoch and only 10 sequences of 30 tokens haha <end> <start> Winfrey: I seeeee <end> <start> Jonathan: The addition of the emoji in the response is so funny <end> <start> Ester: "work that is yuh" <end> <start> Samuel: lol we gonna have an unbalanced dataset üò≠ <end> <start> Ester: you can spam the chat right now for data haha <end> <start> Samuel: lol ya <end> <start> Jonathan: Spam with what lol <end> <start> Jonathan: Emojis??? üò≥üò≥üò≥üò≥üò≥üò≥ <end> <start> Jonathan: ü§´üßè‚Äç‚ôÇÔ∏è <end> <start> Ester: keep sending texts and we will have better data üò≥üò≥ <end> <start> Samuel: üòÇ <end> <start> Ester: Can one of you guys download your facebook messenger data and upload the json file for this groupchat to the github repo? I can't download the 3 month one for some reason <end> <start> Jonathan: I‚Äôll try <end> <start> Winfrey: I will try other ways of parsing text and get started on encoder-decoder today.  @Ester Tsai quick question, where can I find the token_idx_map that is used for tokenizing our chat messages? also thank you for getting things set up so quickly!! <end> <start> Jonathan: the 3 month data is uploaded to the github <end> <start> Ester: yuh that is helpful <end> <start> Ester: main.py I think? <end> <start> Ester: on top <end> <start> Ester: More funny response from the LSTM <end> <start> Winfrey: OH OK saw it! Thanks <end> <start> Ester: Apparently we've never used the word Hi before in this chat <end> <start> Winfrey: Hhhahahahahahahahah <end> <start> Winfrey: My Tsai <end> <start> Winfrey: üòÇüòÇüòÇüòÇüòÇüòÇ I can‚Äôt <end> <start> Ester: quite cursed response <end> <start> Ester: Hi guys! Hi guys! Hi guys! I'm gonna spam some content for the generator <end> <start> Winfrey: HAHAHAHAHAHAHAHA <end> <start> Winfrey: Hi everyone! <end> <start> Ester: The LSTM is high key not learning that well currently but it has potential <end> <start> Ester: Sam wanna spam some stuff <end> <start> Winfrey: Ya I think it has huge potential üòÇüòÇ <end> <start> Samuel: hi <end> <start> Ester: to be a comedian LOL this generator has no sense and the best sense all at once <end> <start> Samuel: lol the sentences don‚Äôt make sense üò≠ <end> <start> Winfrey: There‚Äôs so much yuhhh ahhh yooo <end> <start> Winfrey: I really like how it reflects the way we communicate üòÇüòÇüòÇüòÇ <end> <start> Ester: This is with temperature = 1 tho! Quite high. When it's low, it tends to cut the text very short or have nothing at all <end> <start> Winfrey: And I feel like it can make sense for like really short phrases like ‚Äútrying something‚Äù, ‚Äúrun training plots‚Äù <end> <start> Winfrey: Oh i see! Yeah that‚Äôs considered quite high. Maybe for our task we can try towards the higher end, there‚Äôs gonna be more randomness for sure, which also means more creative content <end> <start> Ester: temp=0.4 is like this üßêüßêüßê <end> <start> Winfrey: Ah I see.. looks like it is trying to only give things that it is confident with <end> <start> Winfrey: We can spam a few more in the next few days ü§£ü§£ this is fun <end> <start> Winfrey: Hello everyone! Good morning! <end> <start> Winfrey: Hi how is everyone doing! <end> <start> Winfrey: Hi any progress? <end> <start> Ester: If Winfrey and I spam anymore then class imbalance is more real LOL <end> <start> Winfrey: Also I‚Äôm thinking if we want to make one with the character names more balanced, I‚Äôm fine with substituting names in the original dataset. <end> <start> Ester: Oooooo that could work <end> <start> Ester: Or I was thinking if we bring in information from our other chats when we train a different LSTM for each person <end> <start> Ester: Not yet sure how that would work exactly <end> <start> Ester: Temperature of 0.9 seems to hit a sweet spot <end> <start> Winfrey: Yuppp and if we go further, we can literally have 5 of our own models chatting with each other üòÇ <end> <start> Ester: I'm not sure how to decide what goes in val.txt :0 earlier I tried taking chunks out of the training file, but I might try using the training file as the validation file too and see what that does <end> <start> Ester: You should know how policy gradient works for sure. I often ask about that. You should know what the architecture of the Atari network is. I might ask you questions about Q-learning, like, is it a model-free method? (Yes!). I might ask about differences between Alpha Go and Alpha Go Zero. I won't ask about how AlphaStar works (i.e., about the overall architecture) because I barely understand it myself. But a general question about  how AlphaStar was trained, i.e., why tournament play was important, is possible. <end> <start> Ester: Stuff about the midterm! <end> <start> Winfrey: Ya I was kind of caught off guard by the last part of practice midterm about RL‚Ä¶‚Ä¶ <end> <start> Ester: What is Atari lol <end> <start> Winfrey: ü§∑üèª‚Äç‚ôÄÔ∏è some game but I forgot <end> <start> Jeremy: it‚Äôs a game console lol <end> <start> Jeremy: had pong on it <end> <start> Winfrey: OH so when ppl say atari game it means games that can be played with that console? <end> <start> Jeremy: yea i‚Äôd assume so <end> <start> Winfrey: oh yeah u r right <end> <start> Winfrey: these are atari games <end> <start> Winfrey: i thought only the top left is called an atari game <end> <start> Ester: the lecture calls the top left Pong <end> <start> Ester: So I wonder if Atari network architecture is this or not haha <end> <start> Winfrey: I think the last slide that‚Äôs about this says that Pong uses policy gradient   And then there‚Äôs this Atari player that uses Q-learning <end> <start> Jonathan: Wait since which lecture is MT2 from? <end> <start> Jonathan: Is it convnets? <end> <start> Jonathan: To now <end> <start> Ester: LSTM? <end> <start> Winfrey: And then he said, when he was going through this slide, that he won‚Äôt cover Q learning. Then the next lecture he was like just kidding we are doing Q learning <end> <start> Ester: but midterm is cumulative with emphasis on second half <end> <start> Winfrey: So Q learning is in the next lecture slide <end> <start> Jonathan: Ahh ok <end> <start> Ester: What is the answer to this :0 <end> <start> Winfrey: B <end> <start> Winfrey: D is wrong because it is usually smaller   A is wrong because it has the same size  C is wrong because it doesn‚Äôt need labels (?) <end> <start> Ester: yay thanks for the explanation <end> <start> Ester: A ? <end> <start> Winfrey: Ooohhhhh it‚Äôs either A or B <end> <start> Ester: yeahh okok <end> <start> Winfrey: Jeremy asked a question about this in lecture. If there‚Äôs only one hidden layer, it‚Äôll learn a linear data manifold ..? More than one then it can technically learn non linear data manifold <end> <start> Ester: is a helix considered a linear data manifold? <end> <start> Winfrey: I‚Äôm leaning towards no, it‚Äôs non linear <end> <start> Winfrey: I‚Äôm not sure though. I read about helix being a 1d data ermmm it‚Äôs challenging my concept of linear vs non linear <end> <start> Ester: helix can be laid out into a line so maybe it do be linear? <end> <start> Winfrey: Oooh I seee, good to know that <end> <start> Ester: Calling at 3pm? <end> <start> Ester: I‚Äôll be getting home right around then, so I‚Äôll join when I can! <end> <start> Winfrey: yes, I'm getting off work now, give me a few mins <end> <start> Winfrey: https://ucsd.zoom.us/j/92253489292 <end> <start> Ester: https://medium.com/@wukathy/making-a-chatbot-that-speaks-like-you-68412654e78e <end> <start> Samuel: https://www.kaggle.com/code/changyeop/how-to-fine-tune-gpt-2-for-beginners <end> <start> Winfrey: prompt-response format, for one data point: {prompt: <text>, response: <text>} <end> <start> Ester: inside the txt file: <end> <start> Ester: {'prompt': <text>, 'response': <text>} <end> <start> Ester: {'prompt': <text>, 'response': <text>} {'prompt': <text>, 'response': <text>} {'prompt': <text>, 'response': <text>} {'prompt': <text>, 'response': <text>} <end> <start> Ester: JSON file <end> <start> Ester: {     {'prompt': <text>, 'response': <text>}     {'prompt': <text>, 'response': <text>}     {'prompt': <text>, 'response': <text>}     {'prompt': <text>, 'response': <text>} } <end> <start> Samuel: do i consider a response valid if it was within x amount of time since the last message? <end> <start> Ester: high key maybe we can just start with a naive version without considering the time stamp <end> <start> Samuel: okay <end> <start> Samuel: where is the data at? <end> <start> Samuel: oh nvm <end> <start> Ester: just pair up all the consecutive texts as prompts and responses <end> <start> Ester: and then make it better <end> <start> Ester: https://github.com/ester-tsai/AI_text_generator/blob/main/data/CSE151B_groupchat_3mo.json <end> <start> Ester: btw the bottom is the start, and the conversation goes from the bottom up <end> <start> Samuel: ok <end> <start> Ester: I think Jeremy is saying that if the time between two messages is too long then do not form a prompt-response pair between them <end> <start> Jeremy: yep <end> <start> Ester: btw please make a copy of the Data Cleaning jupyter notebook haha, I still need the old one <end> <start> Samuel: alright <end> <start> Jeremy: mb make a new branch too <end> <start> Samuel: @Winfrey Kong how soon do you need the data? i was thinking of doing it after the midterm <end> <start> Jonathan: Does anyone know what lecture the markov property is discussed in <end> <start> Winfrey: Yes this is good, is tomorrow afternoon before 3pm okay? <end> <start> Winfrey: Not sure but maybe one of the GANs <end> <start> Samuel: sounds good <end> <start> Jeremy: gpt is training rn, the training times are really long <end> <start> Jeremy: for anything more than a quick test will probably need to run overnight <end> <start> Winfrey: Interesting, do you know what is causing it to be slow? <end> <start> Jeremy: it‚Äôs just a big model i think <end> <start> Jeremy: and i‚Äôm back propping through the whole thing <end> <start> Winfrey: I see <end> <start> Jeremy: in the alpha go lecture <end> <start> Winfrey: also i think in lecture, prof briefly mentioned that he could ask about the order of this diagram in midterm <end> <start> Ester: is this true? <end> <start> Jeremy: no <end> <start> Jeremy: they unroll and do backprop on each timestep <end> <start> Jeremy: also it‚Äôs so goofy how half of the questions don‚Äôt even have answers smh <end> <start> Ester: GOOF haha <end> <start> Ester: how about this <end> <start> Ester: and this oof <end> <start> Winfrey: True <end> <start> Winfrey: Decoder can only look from the past <end> <start> Jeremy: false <end> <start> Jeremy: it will do the funny interpolation thing <end> <start> Winfrey: Wait as in <end> <start> Jeremy: like it'll smoothly animate between but the animation will not be realistic <end> <start> Winfrey: Yeah so true right <end> <start> Jeremy: its like the faces demo in lecture i think <end> <start> Winfrey: As in, the statement is ‚Äúit may not‚Äù <end> <start> Jeremy: oh uhhhhh yes true oop <end> <start> Samuel: wait where is the repo for the final proj? <end> <start> Winfrey: Did u receive an email from Ester for the invitation? <end> <start> Samuel: i dont think so <end> <start> Winfrey: Ah okay one sec <end> <start> Winfrey: https://github.com/ester-tsai/AI_text_generator <end> <start> Samuel: thanks <end> <start> Ester: Do you still need to get added? <end> <start> Samuel: dont think so <end> <start> Samuel: haven't tried to push yet tho <end> <start> Samuel: ill lyk <end> <start> Ester: lol you need to be added as a collaborator right <end> <start> Ester: What‚Äôs your email? <end> <start> Ester: Or GitHub username <end> <start> Ester: ok added <end> <start> Ester: Hi guys! Reminder to add your chat data to the "data" folder on main! <end> <start> Winfrey: OH SORRY! Slipped my mind <end> <start> Winfrey: I‚Äôll download now <end> <start> Winfrey: seq2seq lstm is working. just that backprop is a little slow and the losses aren't really stable - we should look into data quality later  @Ester Tsai my chat messages are still being downloaded sorry! (it's been way over 12 hours <end> <start> Jeremy: how long is an epoch? <end> <start> Winfrey: maybe 5 seconds? <end> <start> Jeremy: oh uhhh each epoch for gpt takes 20 minutes lol <end> <start> Winfrey: im kind of doing minibatch gradient descent, looping through the entire dataset is superrrr looooong <end> <start> Winfrey: my batch size is 10 lol <end> <start> Winfrey: initially my batch size was 100, loss drops very very slowly. so.. smaller batch size helped a lot <end> <start> Winfrey: my goodnessssss <end> <start> Winfrey: 3 epochs per hour thats insane <end> <start> Winfrey: just fyi, our train data has 400 samples, validation has 91 samples, test has 10 samples <end> <start> Ester: Comments: Project scope looks great, I am super excited for it. I would suggest looking at BLEU and ROUGE scores to assess the quality of the generated texts, use them as metrics. (These are non-differentiable so you can't use them to optimize the weights in your training).  If you have any questions - please email me: aghafari@ucsd.edu, come to my OH or send a question on Piazza.  GWC: I would suggest using a pre-trained model (e.g., GPT) and fine-tuning it for your task instead. I'm guessing that your dataset will be too small to train a model from scratch. But maybe it would work... <end> <start> Ester: TA feedback <end> <start> Winfrey: niceeee <end> <start> Winfrey: glad we are doing both from scratch and pre-trained!! <end> <start> Winfrey: i'm a little concerned about the training time for pretrained ones tho <end> <start> Winfrey: like it's not too friendly for us to run it anytime anywhere <end> <start> Ester: How‚Äôs the result for fine tuning pretrained? @Jeremy Tow <end> <start> Jeremy: no new updates yet cuz i've been doing phys hw the whole day, i'll run it again tonight and update <end> <start> Winfrey: @Ester Tsai just downloaded my messages, i'll process it first cause for a pretty big file that I plan to share, github defaults to saving an empty file everytime i upload it. <end> <start> Winfrey: ok it's up! it's from the same friend, past 3 years conversation <end> <start> Ester: 3 YEARS DANG <end> <start> Jeremy: my training time shaking in fear be like: <end> <start> Winfrey: HAHAHHAHA she's the only friend that i've known for a while (enough data points) + whom i used 99% english with lmao AHAHHA my malaysian friends don't fit the use case too well, too many other languages hahahha <end> <start> Ester: Reminder for calling on Monday 7pm! <end> <start> Jeremy: i got output lol <end> <start> Jeremy: i think its because im not training it for enough epochs <end> <start> Jeremy: im only doing 5 rn <end> <start> Jeremy: before i go to sleep i'll let it train until 6 pm tmr or smth <end> <start> Jeremy: and see where it goes <end> <start> Winfrey: Yeaaaa cool cool <end> <start> Jeremy: just started training for70 epochs,shuld be done sometime around 2 pm tmr <end> <start> Winfrey: very overfitted on train set.  I tried generating yesterday, it's just generating a bunch of thank you you you you so i'll continue working on the training approach and data cleaning <end> <start> Winfrey: we are currently evaluating and saving based on best val loss but i'll add one more below that that saves the final model. <end> <start> Winfrey: much better <end> <start> Winfrey: 10 means, maximum 10 words <end> <start> Jonathan: Not sure that I can make todays meeting <end> <start> Winfrey: could someone set up our report outline? the progress report that‚Äôs due tomorrow needs to be in a report format <end> <start> Jonathan: Are you guys able to access data hub rn? <end> <start> Winfrey: Not sure, not on it now but it was working for me 30mins ago <end> <start> Jonathan: Does your guys models always respond with a persons name as a label to see who‚Äôs talking? <end> <start> Jonathan: Bleu score has a reference to calculate the score against but I could do using the entire training text or the text for each specific person <end> <start> Winfrey: Nope. It would if I train it with our names but I didn‚Äôt <end> <start> Jonathan: Ok I‚Äôll try calculating scores wu the the entire training data <end> <start> Ester: Does anyone wanna help set this up before our meeting today? If not, I can <end> <start> Jonathan: Can someone paste some outputs of the models <end> <start> Jonathan: Like the generated text <end> <start> Jonathan: lol its not terrible <end> <start> Ester: Could you all write in your PID and ucsd email? https://docs.google.com/spreadsheets/d/1TNFL1PNXTHSIhabZY1f5zAzvEtpE-qps1h1BbMRNTKE/edit <end> <start> Ester: @Samuel Chu @Jonathan Cheung @Jeremy Tow @Winfrey Kong <end> <start> Ester: And also any team name suggestions? Something to do with our project? <end> <start> Winfrey: Hmmmm <end> <start> Ester: I like the team named Shallow Learning HAHA <end> <start> Winfrey: HAHAHAHAHAAHA <end> <start> Winfrey: Hahahahahahaahahhah <end> <start> Winfrey: And I like how it‚Äôs gone from team name -> project name <end> <start> Ester: What if our team name is PA5 <end> <start> Winfrey: YA let‚Äôs put that first HAHAHAHAH <end> <start> Winfrey: Placeholder <end> <start> Winfrey: üòÇüòÇüòÇ <end> <start> Winfrey: HAHAHAAHAH <end> <start> Winfrey: Hahahahah this is my kind of humor üòÇ <end> <start> Ester: It can stand for something edgy like Pre-trained Automata 5 üòéüòéüòé <end> <start> Winfrey: My friend next to me right now suggested: Unsupervised learners <end> <start> Winfrey: üòÇüòÇüòÇüòÇüòÇüòÇ <end> <start> Winfrey: HAHAHA YA and be like what do you think it was <end> <start> Ester: HAHAHAHAHAHAH <end> <start> Ester: I like this one <end> <start> Winfrey: üòÇüòÇüòÇüòÇ <end> <start> Winfrey: Sure I‚Äôm good with that too <end> <start> Ester: Dang it I like both <end> <start> Ester: Maybe everyone else can tie break <end> <start> Jonathan: I‚Äôll vote for this one <end> <start> Ester: Bump! <end> <start> Ester: Final Project report: https://www.overleaf.com/7183126595rkbjqdxxhtqj#75a158 <end> <start> Winfrey: https://ucsd.zoom.us/j/94932945931 <end> <start> Ester: @Jeremy Tow @Samuel Chu wanna join? <end> <start> Jeremy: one second <end> <start> Ester: https://docs.google.com/spreadsheets/d/1TNFL1PNXTHSIhabZY1f5zAzvEtpE-qps1h1BbMRNTKE/edit#gid=0 <end> <start> Jeremy: Just pushed my gpt code <end> <start> Jeremy: i havent implemented any fixes yet, will prob do that later today <end> <start> Ester: aight I also tried to fine-tune gpt but the result also suffer a lot from <pad> so I'll try smaller batch size or somehting <end> <start> Winfrey: @Jonathan Cheung for the progress report, would you be down to work on the metrics section - 4.1 Measuring Performance? <end> <start> Jonathan: Yeah <end> <start> Ester: We‚Äôre aiming to finish our assigned report sections by Wed night <end> <start> Jonathan: @Jeremy Tow how long does training take for your code <end> <start> Jeremy: 20 min per epoch on a 3070 <end> <start> Jonathan: or can you send me some random outputs <end> <start> Jeremy: lowkey my current stuff is not worth sending lol <end> <start> Jonathan: Does it have labeled outputs with names or no <end> <start> Jeremy: i mean yes but they‚Äôre rly rly bad <end> <start> Ester: What is yourbatch  size <end> <start> Jeremy: 4 i think <end> <start> Jeremy: its only that low bc i have a ton of padding <end> <start> Ester: When I set batch size to 64 on my gpt model, each batch is only a few seconds <end> <start> Jeremy: oh Uhhhh <end> <start> Ester: Haven‚Äôt tested other batch sizes yet <end> <start> Jeremy: are u using ur own code? <end> <start> Ester: Yes, copied from some repo <end> <start> Jeremy: o okok i will look into that fs <end> <start> Jonathan: bert score results <end> <start> Winfrey: Ooh is BERT score between 0 and 1? <end> <start> Jonathan: Yeah <end> <start> Jonathan: Technically the number I‚Äôm printing is an average between the input and all of the possible sentences in the training data <end> <start> Jonathan: Though I‚Äôm still messing with it bc the score is still pretty high even when I input gibberish <end> <start> Ester: @Jeremy Tow What learning rate do you use for fine tuning? <end> <start> Ester: Using 1e-5 is better than higher numbers (1e-3 resulted in just <pad>) <end> <start> Samuel: i just realized that the data i gave @Winfrey Kong is reversed. the prompt is the response and vice versa <end> <start> Samuel: lemme fix it <end> <start> Winfrey: Oh yeah no worries <end> <start> Winfrey: I fixed it already <end> <start> Samuel: oh okay thanks <end> <start> Samuel: do you have to changes on your branch? <end> <start> Winfrey: You mean the current data? <end> <start> Winfrey: Or the notebook <end> <start> Samuel: the notebook <end> <start> Samuel: cuz i was gonna go into the notebook and get the good data by hand <end> <start> Winfrey: Oh I can upload it. I specifically opted out to push the notebook to avoid confusing people <end> <start> Winfrey: Would you like me to upload to your branch? <end> <start> Samuel: oh okay <end> <start> Samuel: sure <end> <start> Ester: the smiley face LOL  : D <end> <start> Samuel: that looks pretty good <end> <start> Winfrey: Okie done! @Samuel Chu   It‚Äôs called Data Cleaning Sam <end> <start> Winfrey: In the branch sam <end> <start> Samuel: okay thank you üëç <end> <start> Winfrey: HAHAHAH I pushed a paper <end> <start> Winfrey: Named a5000 <end> <start> Ester: comparing the result to the original training data <end> <start> Samuel: dang that's good <end> <start> Samuel: idk how good this hand picked data is gonna be tbh <end> <start> Samuel: most of it is just winfrey responding to ppl lol <end> <start> Ester: For this model I'm just using my own data from this chat, but I will try training other models too <end> <start> Ester: space is an issue though <end> <start> Ester: I might only have 10G, and each model is about 0.7G <end> <start> Samuel: which models were you going to try to train? <end> <start> Samuel: i was going to try to finetune a new model <end> <start> Ester: I'll train one for Winfrey next maybe? <end> <start> Ester: I wonder why the tokenizer doesn't recognize the word "Who" <end> <start> Winfrey: Depends on what type of tokenizer that is. I honestly don‚Äôt know the difference but there‚Äôs byte-pair encoding (BPE), word piece etc and they encode words differently  I think BERT is word piece and GPT is BPE <end> <start> Winfrey: Then again, idk exactly how they work <end> <start> Jonathan: If you‚Äôre talking abt Bert score, it is word by word comparison <end> <start> Jonathan: Average between all possible training sentences and whatever you‚Äôre pairing against <end> <start> Ester: I added individual prompt responses for each person if anyone might need that <end> <start> Ester: reminder to finish your assigned report section by tonight! <end> <start> Jonathan: do we need specific metrics in the model eval section or does egenral overview of bleu and bert score suffice <end> <start> Ester: What is considered a good score? <end> <start> Jonathan: researching that <end> <start> Jonathan: im assumign the 2-gram <end> <start> Jonathan: bc i think 1 gram refers to whether the text appears withint he training set <end> <start> Ester: We need a general overview of what the metrics are in the Methods section, then record the specific numbers in the Results table <end> <start> Jonathan: Precision: 0.826627 Recall: 0.932372 F1 score: 0.839148 <end> <start> Ester: Btw I'm down to be part of the presentation! Does anyone want to do the presentation with me? 2 people should be a good number <end> <start> Ester: finally got to simulate whole groupchat with 5 bots <end> <start> Winfrey: THIS IS AMAZING <end> <start> Ester: but it's too funny and jank <end> <start> Winfrey: Did u have to pass the response after one another? <end> <start> Winfrey: As in Jeremy‚Äôs response to Ester gets passed to the Ester bot <end> <start> Ester: yes <end> <start> Winfrey: Nice nice!! <end> <start> Winfrey: 5 bots are all GPT-based? <end> <start> Winfrey: This is brilliant <end> <start> Winfrey: Can also keep track of the prev person then the next person will be four choose one! <end> <start> Winfrey: I like how u started saying opp at the end and it continues to have opp in the responses üòÇüòÇ <end> <start> Winfrey: Such a great reflection of what we have been talking ü§£ü§£ü§£ and if it follows our data distribution closely it looks like we have been mentioning the number 3 a lot <end> <start> Ester: another convo <end> 